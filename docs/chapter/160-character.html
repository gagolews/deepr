<!DOCTYPE html>


<html class="writer-html5" lang="en" >
<!-- Copyright (C) 2020-2022, Marek Gagolewski <https://www.gagolewski.com> -->

<head>
  <meta charset="utf-8" />

  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta content="Deep R Programming" name="citation_title" />
<meta content="Marek Gagolewski" name="citation_author" />
<meta content="2023" name="citation_date" />
<meta content="2023" name="citation_publication_date" />
<meta content="https://deepr.gagolewski.com/deepr.pdf" name="citation_pdf_url" />
<meta content="https://deepr.gagolewski.com/" name="citation_public_url" />
<meta content="10.5281/zenodo.7490464" name="citation_doi" />
<meta content="Deep R Programming is comprehensive course on one of the most popular languages in data science (statistical computing, graphics, machine learning, data wrangling and analytics). It introduces the base language in-depth and is aimed at ambitious students, practitioners, and researchers who would like to become independent users of this powerful environment. This textbook is a non-profit project. Its online and PDF versions are freely available at https://deepr.gagolewski.com/." name="citation_abstract" />
<meta content="summary" name="twitter:card" />
<meta content="Deep R Programming" name="twitter:title" />
<meta content="Deep R Programming" name="og:title" />
<meta content="Deep R Programming is comprehensive course on one of the most popular languages in data science (statistical computing, graphics, machine learning, data wrangling and analytics). It introduces the base language in-depth and is aimed at ambitious students, practitioners, and researchers who would like to become independent users of this powerful environment. This textbook is a non-profit project. Its online and PDF versions are freely available at https://deepr.gagolewski.com/." name="twitter:description" />
<meta content="Deep R Programming is comprehensive course on one of the most popular languages in data science (statistical computing, graphics, machine learning, data wrangling and analytics). It introduces the base language in-depth and is aimed at ambitious students, practitioners, and researchers who would like to become independent users of this powerful environment. This textbook is a non-profit project. Its online and PDF versions are freely available at https://deepr.gagolewski.com/." name="og:description" />
<meta content="gagolews/deepr" name="og:site_name" />
<meta content="https://deepr.gagolewski.com/" name="og:url" />
<meta content="https://deepr.gagolewski.com/_images/cover.png" name="twitter:image" />
<meta content="https://deepr.gagolewski.com/_images/cover.png" name="og:image" />
<meta content="https://deepr.gagolewski.com/" name="DC.identifier" />
<meta content="Marek Gagolewski" name="DC.publisher" />
<meta content="INDEX,FOLLOW" name="robots" />
<meta content="book" name="og:type" />
<meta content="9780645571929" name="og:book:isbn" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>6. Character Vectors &mdash; Deep R Programming by Marek Gagolewski</title>
  

  
  
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/proof.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  

  
  

  
    <link rel="canonical" href="https://deepr.gagolewski.com/chapter/160-character.html" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/proof.js"></script>
        <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="7. Functions" href="170-function.html" />
    <link rel="prev" title="5. Vector Indexing" href="150-indexing.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html"> Deep R Programming
          

          
          </a>

          <div class="version">
          An Open-Access Textbook<br />    by <a style="color: inherit" href="https://www.gagolewski.com">Marek     Gagolewski</a><br />    v0.1.13.9001 (draft)
          </div>

<!--
          
            
            
              <div class="version">
                by Marek Gagolewski
              </div>
            
          
-->

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search phrase..." />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">About</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.gagolewski.com/">Author</a></li>
<li class="toctree-l1"><a class="reference external" href="https://deepr.gagolewski.com/deepr.pdf">This Book in PDF</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/deepr/">Report Bugs or Typos (GitHub)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/teaching-data">Datasets</a></li>
<li class="toctree-l1"><a class="reference external" href="https://datawranglingpy.gagolewski.com">Data Wrangling with Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Start Here</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="000-preface.html">Preface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deep</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="110-basics.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="120-numeric.html">2. Numeric Vectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="130-logical.html">3. Logical Vectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="140-list.html">4. Lists and Attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="150-indexing.html">5. Vector Indexing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">6. Character Vectors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-character-vectors">6.1. Creating Character Vectors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#inputting-individual-strings">6.1.1. Inputting Individual Strings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#many-strings-one-object">6.1.2. Many Strings, One Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="#concatenating-character-vectors">6.1.3. Concatenating Character Vectors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#formatting-objects">6.1.4. Formatting Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reading-text-data-from-files">6.1.5. Reading Text Data from Files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pattern-searching">6.2. Pattern Searching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#comparing-whole-strings">6.2.1. Comparing Whole Strings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#partial-matching">6.2.2. Partial Matching</a></li>
<li class="toctree-l3"><a class="reference internal" href="#matching-anywhere-within-a-string">6.2.3. Matching Anywhere Within a String</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-regular-expressions">6.2.4. Using Regular Expressions (*)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#locating-pattern-occurrences">6.2.5. Locating Pattern Occurrences</a></li>
<li class="toctree-l3"><a class="reference internal" href="#replacing-pattern-occurrences">6.2.6. Replacing Pattern Occurrences</a></li>
<li class="toctree-l3"><a class="reference internal" href="#splitting-strings-into-tokens">6.2.7. Splitting Strings into Tokens</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#other-string-operations">6.3. Other String Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#extracting-substrings">6.3.1. Extracting Substrings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#translating-characters">6.3.2. Translating Characters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ordering-strings">6.3.3. Ordering Strings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#other-atomic-vector-types">6.4. Other Atomic Vector Types (*)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#integer-vectors">6.4.1. Integer Vectors (*)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#raw-vectors">6.4.2. Raw Vectors (*)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#complex-vectors">6.4.3. Complex Vectors (*)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#exercises">6.5. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="170-function.html">7. Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="180-flow.html">8. Flow of Execution</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deeper</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="210-design.html">9. Designing Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="220-s3.html">10. S3 Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="230-matrix.html">11. Matrices and Other Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="240-data-frame.html">12. Data Frames</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deepest</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="310-graphics.html">13. üößüöß Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="320-compiled.html">14. üößüöß Interfacing Compiled Code (*)</a></li>
<li class="toctree-l1"><a class="reference internal" href="330-language.html">15. üöß Unevaluated Expressions (**)</a></li>
<li class="toctree-l1"><a class="reference internal" href="340-environment.html">16. üößüöß Environments and Evaluation (**)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="998-changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="999-bibliography.html">References</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Deep R Programming</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          



















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">6. </span>Character Vectors</li>
    
    
      <li class="wy-breadcrumbs-aside">

        
        
        <a class="github-button" href="https://github.com/gagolews/deepr" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star gagolews/deepr on GitHub">GitHub</a>
        


        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="170-function.html" class="btn btn-neutral float-right" title="7. Functions" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="150-indexing.html" class="btn btn-neutral float-left" title="5. Vector Indexing" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section class="tex2jax_ignore mathjax_ignore" id="character-vectors">
<span id="chap-character"></span><h1><span class="section-number">6. </span>Character Vectors<a class="headerlink" href="#character-vectors" title="Permalink to this heading">ÔÉÅ</a></h1>
<blockquote>
<div><p><em>The open-access textbook</em>
Deep R Programming <em>by <a class="reference external" href="https://www.gagolewski.com">Marek Gagolewski</a>
is, and will remain, freely available for everyone‚Äôs enjoyment
(also in <a class="reference external" href="https://deepr.gagolewski.com/deepr.pdf">PDF</a>).
It is a non-profit project.</em>
<strong>This book is still a work in progress. Beta versions
of Chapters 1‚Äì12 are already complete, but there will be more.
In the meantime, any
<a class="reference external" href="https://github.com/gagolews/deepr/issues">bug/typos reports/fixes</a>
are appreciated.</strong>
<em>Although available online, it is a whole course;
it should be read from the beginning to the end.
Refer to the <a class="reference internal" href="000-preface.html#chap-preface"><span class="std std-ref">Preface</span></a> for general introductory remarks.</em>
<em>Also, check out my other book, <a class="reference external" href="https://datawranglingpy.gagolewski.com/"><em>Minimalist Data Wrangling with Python</em></a> <span id="id1">[<a class="reference internal" href="999-bibliography.html#id3" title="Gagolewski, M. (2022).  Minimalist Data Wrangling with Python. Zenodo, Melbourne. URL: https://datawranglingpy.gagolewski.com/, DOI: 10.5281/zenodo.6451068.">20</a>]</span>.</em></p>
</div></blockquote>
<p>Text is a universal, portable, economic, and efficient
means of interacting between humans and computers
as well as exchanging data between programs or APIs.
This book is 99% made of text. And, wow, how much useful knowledge
is in it, innit?</p>
<section id="creating-character-vectors">
<h2><span class="section-number">6.1. </span>Creating Character Vectors<a class="headerlink" href="#creating-character-vectors" title="Permalink to this heading">ÔÉÅ</a></h2>
<section id="inputting-individual-strings">
<h3><span class="section-number">6.1.1. </span>Inputting Individual Strings<a class="headerlink" href="#inputting-individual-strings" title="Permalink to this heading">ÔÉÅ</a></h3>
<p>Specific character strings are delimited
either by a pair of  double quotes or a pair of single quotes (apostrophes).</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;a string&quot;</span>
<span class="c1">## [1] &quot;a string&quot;</span>
<span class="s">&#39;another string&#39;</span>  <span class="c1"># and of course neither &#39;like this&quot; nor &quot;like this&#39;</span>
<span class="c1">## [1] &quot;another string&quot;</span>
</pre></div>
</div>
<p>The only difference between these two lies in the fact
that we cannot directly include, e.g.,
an apostrophe in a single quote-delimited string.
On the other hand, <code class="docutils literal notranslate"><span class="pre">&quot;'tis</span> <span class="pre">good</span> <span class="pre">ol'</span> <span class="pre">spam&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">'I</span> <span class="pre">&quot;love&quot;</span> <span class="pre">bacon'</span></code>
are both okay.</p>
<p>However, we may always use <em>escape sequences</em> to embrace
characters whose inclusion might otherwise be difficult or impossible.</p>
<p>R uses the backslash, ‚Äú<code class="docutils literal notranslate"><span class="pre">\</span></code>‚Äù, as the escape character, in particular:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">\&quot;</span></code> inputs the double quote character,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\'</span></code> ‚Äì single quote,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\\</span></code> ‚Äì backslash,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\n</span></code> ‚Äì new line.</p></li>
</ul>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">x</span> <span class="o">&lt;-</span> <span class="s">&quot;I \&quot;love\&quot; bacon\n\\\&quot;/&quot;</span><span class="p">)</span>
<span class="c1">## [1] &quot;I \&quot;love\&quot; bacon\n\\\&quot;/&quot;</span>
</pre></div>
</div>
<p>The <strong class="command">print</strong> function (which was implicitly called to display
the above object) does not reveal the special meaning of the escape
sequences. Rather, <strong class="command">print</strong> outputs strings in the very way which
we ourselves would follow when inputting them.
The number of characters in <code class="docutils literal notranslate"><span class="pre">x</span></code> is 18, and not 23:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">nchar</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## [1] 18</span>
</pre></div>
</div>
<p>To display the string as-it-really-is, we call:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">cat</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## I &quot;love&quot; bacon</span>
<span class="c1">## \&quot;/</span>
</pre></div>
</div>
<p>Raw character constants, where the backslash character‚Äôs special
meaning is disabled, can be entered using the notation
like <code class="docutils literal notranslate"><span class="pre">r&quot;(...)&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">r&quot;{...}&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">r&quot;[...]&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">r&quot;----(...)----&quot;</span></code>, etc.;
see <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;Quotes&quot;)</span></code>. These can be useful when inputting
regular expressions (see below).</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">&lt;-</span> <span class="n">r</span><span class="s">&quot;(spam\n\\\&quot;maps)&quot;</span>
<span class="nf">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## [1] &quot;spam\\n\\\\\\\&quot;maps&quot;</span>
<span class="nf">cat</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## spam\n\\\&quot;maps</span>
</pre></div>
</div>
<p>‚Ä¶ and of course the string version of the missing value marker
is ‚Äú<code class="docutils literal notranslate"><span class="pre">NA_character_</span></code>‚Äù.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>(*)
Some output devices may support the following
codes that control the position of the caret (text cursor):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">\b</span></code> ‚Äì backspace (move cursor one column to the left),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\t</span></code> ‚Äì tab (advance to the next tab stop, e.g., a multiply of 8),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\r</span></code> ‚Äì carriage return (move to the beginning of the current line).</p></li>
</ul>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">cat</span><span class="p">(</span><span class="s">&quot;abc\bd\tef\rg\nhij&quot;</span><span class="p">)</span>
<span class="c1">## gbd     ef</span>
<span class="c1">## hij</span>
</pre></div>
</div>
<p>These can be used on unbuffered outputs
(e.g., <em>stderr</em>; see <a class="reference internal" href="180-flow.html#sec-time-complexity"><span class="std std-numref">Section¬†8.3.5</span></a>)
to display the status of the current operation (a simple ‚Äúanimated‚Äù
progress bar, the print-out of the ETA, or the % completed).</p>
<p>Further, certain terminals can also understand
<a class="reference external" href="https://en.wikipedia.org/wiki/ANSI_escape_code">the ECMA-48/ANSI-X3.64 escape sequences</a> of the form ‚Äú<code class="docutils literal notranslate"><span class="pre">\u001b[...</span></code>‚Äù
to further control the cursor‚Äôs position, text colour, and even style.
For example, ‚Äú<code class="docutils literal notranslate"><span class="pre">\u001b[1;31m</span></code>‚Äù outputs red bold text
and ‚Äú<code class="docutils literal notranslate"><span class="pre">\u001b[0m</span></code>‚Äù resets the settings to default.
Give, e.g., ‚Äú<strong class="command">cat</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;\u001b[1;31mspam\u001b[0m&quot;)</span></code>‚Äù
or ‚Äú<strong class="command">cat</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;\u001b[5;36m\u001b[Abacon\u001b[Espam\u001b[0m&quot;)</span></code>‚Äù
a try.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>(*)
The Unicode standard 15.0 (version dated September 2022) defines over 149,186
characters, i.a., letters from different scripts, mathematical symbols,
and emojis.
Each of them is assigned a unique numeric identifier; see the
<a class="reference external" href="https://www.unicode.org/charts/">Unicode Character Code Charts</a>.
For example, the <em>inverted exclamation mark</em> (see the Latin-1 Supplement
section therein) has been mapped to hexadecimal code 0xA1 (or 161 decimally).
Knowing this magic number allows us to specify a
Unicode code point using one of the following escape sequences:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">\uxxxx</span></code> ‚Äì codes using four hexadecimal digits,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\Uxxxxxxxx</span></code> ‚Äì codes using eight hexadecimal digits.</p></li>
</ul>
<p>For instance:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">cat</span><span class="p">(</span><span class="s">&quot;!\u00a1!\U000000a1!&quot;</span><span class="p">)</span>
<span class="c1">## !¬°!¬°!</span>
</pre></div>
</div>
<p>All R installations allow for working with Unicode strings
(more precisely, UTF-8) ‚Äì a super-encoding which
is native to most Unix-like boxes (including GNU/Linux and m**OS).
Other operating systems may use some 8-bit encoding as the system one
(e.g., <code class="docutils literal notranslate"><span class="pre">latin1</span></code> or <code class="docutils literal notranslate"><span class="pre">cp1252</span></code>), but they can be
mixed with Unicode seamlessly. See <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;Encoding&quot;)</span></code>,
<strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;iconv&quot;)</span></code>, and <span id="id2">[<a class="reference internal" href="999-bibliography.html#id53" title="Gagolewski, M. (2022).  stringi: Fast and portable character string processing in R. Journal of Statistical Software, 103(2):1‚Äì59. URL: https://stringi.gagolewski.com, DOI: 10.18637/jss.v103.i02.">21</a>]</span> for discussion.</p>
<p>Nevertheless, certain output devices
(web browsers, LaTeX renderers, text terminals)
might be unable to display each and every Unicode
character, e.g., due to some fonts missing.
As far as the processing of character data is concerned, though,
this does not matter: R does it with its eyes closed.</p>
<p>For example, in the <a class="reference external" href="https://deepr.gagolewski.com/deepr.pdf">PDF version</a>
of this joyful book, none
of the following Unicode glyphs are displayed properly, because
yours cordially did not care about installing appropriate fonts in his
XeLaTeX distribution. However, its
<a class="reference external" href="https://deepr.gagolewski.com">HTML variant</a>,
which is generated from exactly the same source files as the former,
will likely be rendered by the kind reader‚Äôs web browser as intended.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">cat</span><span class="p">(</span><span class="s">&quot;\U0001f642\u2665\u0bb8\U0001f923\U0001f60d\u2307&quot;</span><span class="p">)</span>
<span class="c1">## üôÇ‚ô•‡Æ∏ü§£üòç‚åá</span>
</pre></div>
</div>
</div>
</section>
<section id="many-strings-one-object">
<h3><span class="section-number">6.1.2. </span>Many Strings, One Object<a class="headerlink" href="#many-strings-one-object" title="Permalink to this heading">ÔÉÅ</a></h3>
<p>Less trivial character vectors (meaning, of length greater than one)
can be constructed by means of, e.g., <strong class="command">c</strong> or
<strong class="command">rep</strong><a class="footnote-reference brackets" href="#footstringcache" id="id3">1</a>.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">x</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="nf">rep</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="m">3</span><span class="p">),</span> <span class="s">&quot;bacon&quot;</span><span class="p">,</span> <span class="kc">NA_character_</span><span class="p">,</span> <span class="s">&quot;spam&quot;</span><span class="p">))</span>
<span class="c1">## [1] &quot;spam&quot;  &quot;spam&quot;  &quot;spam&quot;  &quot;bacon&quot; NA      &quot;spam&quot;</span>
</pre></div>
</div>
<p>Thus, a character vector is in fact a sequence of sequences of characters.
The total number of strings can be fetched, as usual, with the <strong class="command">length</strong>
function. However, the length of each individual string
may be read via the vectorised <strong class="command">nchar</strong>.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">length</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  <span class="c1"># how many strings?</span>
<span class="c1">## [1] 6</span>
<span class="nf">nchar</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>   <span class="c1"># the number of code points in each string</span>
<span class="c1">## [1]  4  4  4  5 NA  4</span>
</pre></div>
</div>
</section>
<section id="concatenating-character-vectors">
<span id="sec-string-concatenate"></span><h3><span class="section-number">6.1.3. </span>Concatenating Character Vectors<a class="headerlink" href="#concatenating-character-vectors" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong class="command">paste</strong> can be used to concatenate  (join) the corresponding
elements of two or more character vectors:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">paste</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">),</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">))</span>  <span class="c1"># sep=&quot; &quot; by default</span>
<span class="c1">## [1] &quot;a 1&quot; &quot;b 2&quot; &quot;c 3&quot;</span>
<span class="nf">paste</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">),</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">),</span> <span class="n">sep</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span>  <span class="c1"># see also paste0</span>
<span class="c1">## [1] &quot;a1&quot; &quot;b2&quot; &quot;c3&quot;</span>
</pre></div>
</div>
<p>The function is deeply vectorised:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">paste</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">),</span> <span class="m">1</span><span class="o">:</span><span class="m">6</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;!&quot;</span><span class="p">,</span> <span class="s">&quot;?&quot;</span><span class="p">))</span>  <span class="c1"># implicit coercion of numbers</span>
<span class="c1">## [1] &quot;a 1 !&quot; &quot;b 2 ?&quot; &quot;c 3 !&quot; &quot;a 4 ?&quot; &quot;b 5 !&quot; &quot;c 6 ?&quot;</span>
</pre></div>
</div>
<p>We can also collapse (flatten, aggregate)
a sequence of strings into a single string:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">paste</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="s">&quot;d&quot;</span><span class="p">),</span> <span class="n">collapse</span><span class="o">=</span><span class="s">&quot;,&quot;</span><span class="p">)</span>
<span class="c1">## [1] &quot;a,b,c,d&quot;</span>
<span class="nf">paste</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="s">&quot;d&quot;</span><span class="p">),</span> <span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">collapse</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="c1">## [1] &quot;a1b2c1d2&quot;</span>
</pre></div>
</div>
<p>Unfortunately (perhaps for the so-called convenience),
<strong class="command">paste</strong> does not treat missing values just like most other vectorised
elementwise functions:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">paste</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">,</span> <span class="kc">NA_character_</span><span class="p">,</span> <span class="s">&quot;B&quot;</span><span class="p">),</span> <span class="s">&quot;!&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="c1">## [1] &quot;A!&quot;  &quot;NA!&quot; &quot;B!&quot;</span>
</pre></div>
</div>
</section>
<section id="formatting-objects">
<h3><span class="section-number">6.1.4. </span>Formatting Objects<a class="headerlink" href="#formatting-objects" title="Permalink to this heading">ÔÉÅ</a></h3>
<p>Strings can also come into being by turning other R objects
into text. For example, the quite customisable
(see <a class="reference internal" href="220-s3.html#chap-s3"><span class="std std-numref">Chapter 10</span></a>) <strong class="command">format</strong>
can be used for pretty-printing data in dynamically generated reports.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">123456.789</span><span class="p">,</span> <span class="o">-</span><span class="kc">pi</span><span class="p">,</span> <span class="kc">NaN</span><span class="p">)</span>
<span class="nf">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## [1] &quot;123456.7890&quot; &quot;    -3.1416&quot; &quot;        NaN&quot;</span>
<span class="nf">cat</span><span class="p">(</span><span class="nf">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">digits</span><span class="o">=</span><span class="m">8</span><span class="p">,</span> <span class="n">scientific</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">,</span> <span class="n">drop0trailing</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">),</span> <span class="n">sep</span><span class="o">=</span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
<span class="c1">## 123456.789</span>
<span class="c1">##     -3.1415927</span>
<span class="c1">##            NaN</span>
</pre></div>
</div>
<p>Moreover, <strong class="command">sprintf</strong> is a workhorse for turning possibly many atomic
vectors to strings. The numbers‚Äô precision, strings‚Äô widths and
justification, etc., can be fully controlled.
Its first argument is a format string; special escape sequences starting
with percent sign, ‚Äú<code class="docutils literal notranslate"><span class="pre">%</span></code>‚Äù, serve as placeholders for the actual values.
For instance, ‚Äú<code class="docutils literal notranslate"><span class="pre">%s</span></code>‚Äù is meant to be replaced with a corresponding string
and ‚Äú<code class="docutils literal notranslate"><span class="pre">%f</span></code>‚Äù with a floating point value.
Additional options are available, e.g., ‚Äú<code class="docutils literal notranslate"><span class="pre">%10.2f</span></code>‚Äù
is a number that, when converted to text, will occupy ten text columns<a class="footnote-reference brackets" href="#footsprintfwidth" id="id4">2</a>,
with two decimal digits of precision.
Also, e.g., ‚Äú<code class="docutils literal notranslate"><span class="pre">%1$s</span></code>‚Äù, ‚Äú<code class="docutils literal notranslate"><span class="pre">%2$s</span></code>‚Äù, ‚Ä¶
will insert the 1st, 2nd, ‚Ä¶ argument as text.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">sprintf</span><span class="p">(</span><span class="s">&quot;%.5f&quot;</span><span class="p">,</span> <span class="kc">pi</span><span class="p">)</span>
<span class="c1">## [1] &quot;3.14159&quot;</span>
<span class="nf">sprintf</span><span class="p">(</span><span class="s">&quot;%s%s&quot;</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;X&quot;</span><span class="p">,</span> <span class="s">&quot;Y&quot;</span><span class="p">,</span> <span class="s">&quot;Z&quot;</span><span class="p">))</span>  <span class="c1"># like paste(...)</span>
<span class="c1">## [1] &quot;aX&quot; &quot;aY&quot; &quot;aZ&quot;</span>
<span class="nf">sprintf</span><span class="p">(</span><span class="s">&quot;key=%s, value=%.1f&quot;</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;eggs&quot;</span><span class="p">),</span> <span class="nf">c</span><span class="p">(</span><span class="m">100000</span><span class="p">,</span> <span class="m">0</span><span class="p">))</span>
<span class="c1">## [1] &quot;key=spam, value=100000.0&quot; &quot;key=eggs, value=0.0&quot;</span>
<span class="nf">sprintf</span><span class="p">(</span><span class="s">&quot;%.*f&quot;</span><span class="p">,</span> <span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">,</span> <span class="kc">pi</span><span class="p">)</span>  <span class="c1"># variable precision</span>
<span class="c1">## [1] &quot;3.1&quot;     &quot;3.14&quot;    &quot;3.142&quot;   &quot;3.1416&quot;  &quot;3.14159&quot;</span>
<span class="nf">sprintf</span><span class="p">(</span><span class="s">&quot;%1$s, %2$s, %1$s, and %1$s&quot;</span><span class="p">,</span> <span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;bacon&quot;</span><span class="p">)</span>  <span class="c1"># numbered argument</span>
<span class="c1">## [1] &quot;spam, bacon, spam, and spam&quot;</span>
</pre></div>
</div>
<p>See <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;sprintf&quot;)</span></code> for more details. I recommend. Marek Gagolewski.</p>
</section>
<section id="reading-text-data-from-files">
<h3><span class="section-number">6.1.5. </span>Reading Text Data from Files<a class="headerlink" href="#reading-text-data-from-files" title="Permalink to this heading">ÔÉÅ</a></h3>
<p>Given a raw text file, <strong class="command">readLines</strong> can load it into memory so that
it is represented as a character vector, with each line stored in a separate
string.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">&lt;-</span> <span class="nf">readLines</span><span class="p">(</span>
    <span class="s">&quot;https://github.com/gagolews/teaching-data/raw/master/README.md&quot;</span>
<span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">head</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
<span class="c1">## [1] &quot;# [Marek](https://www.gagolewski.com)&#39;s Teaching and Training Data&quot;</span>
<span class="c1">## [2] &quot;&quot;                                                                  </span>
<span class="c1">## [3] &quot;&gt; *See the comment lines within the files themselves for&quot;          </span>
<span class="c1">## [4] &quot;&gt; a detailed description of each dataset.*&quot;                        </span>
<span class="c1">## [5] &quot;&quot;                                                                  </span>
<span class="c1">## [6] &quot;*Good* datasets are actually hard to find!&quot;</span>
</pre></div>
</div>
<p><strong class="command">writeLines</strong> is its counterpart.
There is also an option to read or write parts of files at a time,
which me mention in <a class="reference internal" href="180-flow.html#sec-time-complexity"><span class="std std-numref">Section¬†8.3.5</span></a>.
Also, <strong class="command">cat</strong><code class="code docutils literal notranslate"><span class="pre">(...,</span> <span class="pre">append=TRUE)</span></code> can be used
to create a text file incrementally.</p>
</section>
</section>
<section id="pattern-searching">
<h2><span class="section-number">6.2. </span>Pattern Searching<a class="headerlink" href="#pattern-searching" title="Permalink to this heading">ÔÉÅ</a></h2>
<section id="comparing-whole-strings">
<h3><span class="section-number">6.2.1. </span>Comparing Whole Strings<a class="headerlink" href="#comparing-whole-strings" title="Permalink to this heading">ÔÉÅ</a></h3>
<p>We have already reviewed a couple of ways to compare
strings as a whole. For instance, the `<strong class="command">==</strong>` operator
implements elementwise testing:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;bacon&quot;</span><span class="p">,</span> <span class="s">&quot;eggs&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;eggs&quot;</span><span class="p">)</span>  <span class="c1"># recycling rule</span>
<span class="c1">## [1]  TRUE FALSE FALSE  TRUE</span>
</pre></div>
</div>
<p>Moreover, in <a class="reference internal" href="150-indexing.html#sec-match"><span class="std std-numref">Section¬†5.4.1</span></a>, we have introduced
the <strong class="command">match</strong> function and its derivative, the `<strong class="command">%in%</strong>`
operator, which are vectorised in a different way:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">match</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;bacon&quot;</span><span class="p">,</span> <span class="s">&quot;eggs&quot;</span><span class="p">),</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;eggs&quot;</span><span class="p">))</span>
<span class="c1">## [1]  1  1 NA  2</span>
<span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;bacon&quot;</span><span class="p">,</span> <span class="s">&quot;eggs&quot;</span><span class="p">)</span> <span class="o">%in%</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;eggs&quot;</span><span class="p">)</span>
<span class="c1">## [1]  TRUE  TRUE FALSE  TRUE</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We should stress that these are simple, bytewise comparisons
of the corresponding code points and as such they might not be valid
in, for example, natural language processing activities;
compare <span id="id5">[<a class="reference internal" href="999-bibliography.html#id55" title="Davis, M., Whistler, K., Scherer, M. (2021).  Unicode technical standard #10: Unicode collation algorithm. URL: http://www.unicode.org/reports/tr10/.">13</a>]</span>.
In particular, German word <em>gro√ü</em> is not deemed equal to <em>gross</em>,
although we expect that should be the case, at least in a German language
setting.
Moreover, in the rare situations where we read Unicode-unnormalised
data (say, not in the NFC form; see <span id="id6">[<a class="reference internal" href="999-bibliography.html#id56" title="Davis, M., Whistler, K. (2021).  Unicode standard annex #15: Unicode normalization forms. URL: http://www.unicode.org/reports/tr15/.">12</a>]</span>),
canonically equivalent strings may be
considered as different.</p>
</div>
</section>
<section id="partial-matching">
<h3><span class="section-number">6.2.2. </span>Partial Matching<a class="headerlink" href="#partial-matching" title="Permalink to this heading">ÔÉÅ</a></h3>
<p>When only a consideration of the initial part of each string
is required, we can call:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">startsWith</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;s&quot;</span><span class="p">,</span> <span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;spamtastic&quot;</span><span class="p">,</span> <span class="s">&quot;spontaneous&quot;</span><span class="p">,</span> <span class="s">&quot;spoon&quot;</span><span class="p">),</span> <span class="s">&quot;spam&quot;</span><span class="p">)</span>
<span class="c1">## [1] FALSE  TRUE  TRUE FALSE FALSE</span>
</pre></div>
</div>
<p>Both the above and <strong class="command">endsWith</strong> are applied elementwisely
in case of many search prefixes/suffixes, just like in `<strong class="command">==</strong>`.</p>
<p><em>Partial matching</em> of strings can be performed with <strong class="command">charmatch</strong>.
This is a each-vs-all version of <strong class="command">startsWith</strong>:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">charmatch</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;s&quot;</span><span class="p">,</span> <span class="s">&quot;sp&quot;</span><span class="p">,</span> <span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;spams&quot;</span><span class="p">,</span> <span class="s">&quot;eggs&quot;</span><span class="p">,</span> <span class="s">&quot;bacon&quot;</span><span class="p">),</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;eggs&quot;</span><span class="p">))</span>
<span class="c1">## [1]  1  1  1 NA  2 NA</span>
<span class="nf">charmatch</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;s&quot;</span><span class="p">,</span> <span class="s">&quot;sp&quot;</span><span class="p">,</span> <span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;spoo&quot;</span><span class="p">,</span> <span class="s">&quot;spoof&quot;</span><span class="p">),</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;spoon&quot;</span><span class="p">))</span>
<span class="c1">## [1]  0  0  1  2 NA</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">0</span></code> designates that there was an ambiguity in the matching
of a string to a given table.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>(*)
In <code class="xref std std-numref docutils literal notranslate"><span class="pre">sec:to-do</span></code>, we discuss the more-advanced <strong class="command">match.arg</strong>
which is (unfortunately) frequently called from within other R functions,
and in <a class="reference internal" href="210-design.html#sec-dollar"><span class="std std-numref">Section¬†9.4.2</span></a> and <code class="xref std std-numref docutils literal notranslate"><span class="pre">sec:to-do</span></code>,
we mention the (discouraged) partial
matching of list labels and argument names in function calls.</p>
</div>
</section>
<section id="matching-anywhere-within-a-string">
<h3><span class="section-number">6.2.3. </span>Matching Anywhere Within a String<a class="headerlink" href="#matching-anywhere-within-a-string" title="Permalink to this heading">ÔÉÅ</a></h3>
<p>Fixed patterns can be also searched for anywhere within character
strings using <strong class="command">grepl</strong>:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;y spammite spam&quot;</span><span class="p">,</span> <span class="s">&quot;yummy SPAM&quot;</span><span class="p">,</span> <span class="s">&quot;sram&quot;</span><span class="p">)</span>
<span class="nf">grepl</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">fixed</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>  <span class="c1"># fixed patterns, as opposed to regexes below</span>
<span class="c1">## [1]  TRUE  TRUE FALSE FALSE</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Note that the order of arguments is like
<strong class="command">grepl</strong><code class="code docutils literal notranslate"><span class="pre">(needle,</span> <span class="pre">haystack)</span></code>,
not the other way around. Also, this function is not vectorised with respect
to the first argument.</p>
</div>
<div class="proof proof-type-exercise" id="id15">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.1</span>
        
    </div><div class="proof-content">
<p>Determine how can a call to <strong class="command">grep</strong><code class="code docutils literal notranslate"><span class="pre">(y,</span> <span class="pre">x,</span> <span class="pre">value=FALSE)</span></code>
and <strong class="command">grep</strong><code class="code docutils literal notranslate"><span class="pre">(y,</span> <span class="pre">x,</span> <span class="pre">value=TRUE)</span></code> be implemented
based on <strong class="command">grepl</strong>
and other operations that we are already familiar with.</p>
</div></div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>As a curiosity, <strong class="command">agrepl</strong> performs <em>approximate</em> matching
based on Levenshtein‚Äôs edit distance. This can account for
a small number of ‚Äútypos‚Äù.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">agrepl</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="c1">## [1]  TRUE  TRUE FALSE  TRUE</span>
<span class="nf">agrepl</span><span class="p">(</span><span class="s">&quot;ham&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ignore.case</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [1] TRUE TRUE TRUE TRUE</span>
</pre></div>
</div>
</div>
</section>
<section id="using-regular-expressions">
<h3><span class="section-number">6.2.4. </span>Using Regular Expressions (*)<a class="headerlink" href="#using-regular-expressions" title="Permalink to this heading">ÔÉÅ</a></h3>
<p>Setting <code class="docutils literal notranslate"><span class="pre">perl=TRUE</span></code> allows for identifying occurrences of patterns specified
by the PCRE2 regular expressions (regexes).</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">grepl</span><span class="p">(</span><span class="s">&quot;^spam&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>  <span class="c1"># strings that begin with `spam`</span>
<span class="c1">## [1]  TRUE FALSE FALSE FALSE</span>
<span class="nf">grepl</span><span class="p">(</span><span class="s">&quot;(?i)^spam|spam$&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>  <span class="c1"># begin or end; case ignored</span>
<span class="c1">## [1]  TRUE  TRUE  TRUE FALSE</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more details on regular expressions in general, see, e.g.,
<span id="id7">[<a class="reference internal" href="999-bibliography.html#id57" title="Friedl, J.E.F. (2006).  Mastering Regular Expressions. O'Reilly.">18</a>]</span>.
The ultimate reference for PCRE2 pattern syntax is the
<a class="reference external" href="http://www.pcre.org/current/doc/html/pcre2pattern.html"><code class="docutils literal notranslate"><span class="pre">man</span></code></a> page
<em class="manpage">pcre2pattern(3)</em>.
R also gives access to ERE-like TRE library
(see <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;regex&quot;)</span></code>), which is the default one.
However, we discourage its use, because it is feature-poorer.</p>
</div>
<div class="proof proof-type-exercise" id="id16">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.2</span>
        
    </div><div class="proof-content">
<p>The <strong class="command">list.files</strong> function generates the list
of file names in a given directory that match a given regular expression.
For instance, the following gives all CSV files in some directory.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">list.files</span><span class="p">(</span><span class="s">&quot;../../Projects/teaching-data/r/&quot;</span><span class="p">,</span> <span class="n">r</span><span class="s">&quot;(\.csv$)&quot;</span><span class="p">)</span>  <span class="c1"># or &quot;\\.csv$&quot;</span>
<span class="c1">## [1] &quot;air_quality_1973.csv&quot; &quot;anscombe.csv&quot;         &quot;iris.csv&quot;            </span>
<span class="c1">## [4] &quot;titanic.csv&quot;          &quot;tooth_growth.csv&quot;     &quot;trees.csv&quot;           </span>
<span class="c1">## [7] &quot;world_phones.csv&quot;</span>
</pre></div>
</div>
<p>Write a single regular expression that matches file names
ending with ‚Äú<code class="docutils literal notranslate"><span class="pre">.csv</span></code>‚Äù or ‚Äú<code class="docutils literal notranslate"><span class="pre">.csv.gz</span></code>‚Äù.
Also, write a regex that matches CSV files whose names do not begin
with ‚Äú<code class="docutils literal notranslate"><span class="pre">eurusd</span></code>‚Äù.</p>
</div></div></section>
<section id="locating-pattern-occurrences">
<h3><span class="section-number">6.2.5. </span>Locating Pattern Occurrences<a class="headerlink" href="#locating-pattern-occurrences" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong class="command">regexpr</strong> finds the first occurrence of a pattern in each string:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">regexpr</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">fixed</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [1]  1  3 -1 -1</span>
<span class="c1">## attr(,&quot;match.length&quot;)</span>
<span class="c1">## [1]  4  4 -1 -1</span>
<span class="c1">## attr(,&quot;index.type&quot;)</span>
<span class="c1">## [1] &quot;chars&quot;</span>
<span class="c1">## attr(,&quot;useBytes&quot;)</span>
<span class="c1">## [1] TRUE</span>
</pre></div>
</div>
<p>In particular, there is a pattern occurrence starting at the
3th code point of the 2nd string in <code class="docutils literal notranslate"><span class="pre">x</span></code>.
Moreover, there is no pattern match in the last string (denoted with -1).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">match.length</span></code> attribute is generally more worthwhile when
searching with regular expressions.</p>
<p>To locate all the matches, i.e., globally,
we use <strong class="command">gregexpr</strong>:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># `spam` followed by 0 or more letters, case insensitively</span>
<span class="nf">gregexpr</span><span class="p">(</span><span class="s">&quot;(?i)spam\\p{L}*&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [[1]]</span>
<span class="c1">## [1] 1</span>
<span class="c1">## attr(,&quot;match.length&quot;)</span>
<span class="c1">## [1] 4</span>
<span class="c1">## attr(,&quot;index.type&quot;)</span>
<span class="c1">## [1] &quot;chars&quot;</span>
<span class="c1">## attr(,&quot;useBytes&quot;)</span>
<span class="c1">## [1] TRUE</span>
<span class="c1">## </span>
<span class="c1">## [[2]]</span>
<span class="c1">## [1]  3 12</span>
<span class="c1">## attr(,&quot;match.length&quot;)</span>
<span class="c1">## [1] 8 4</span>
<span class="c1">## attr(,&quot;index.type&quot;)</span>
<span class="c1">## [1] &quot;chars&quot;</span>
<span class="c1">## attr(,&quot;useBytes&quot;)</span>
<span class="c1">## [1] TRUE</span>
<span class="c1">## </span>
<span class="c1">## [[3]]</span>
<span class="c1">## [1] 7</span>
<span class="c1">## attr(,&quot;match.length&quot;)</span>
<span class="c1">## [1] 4</span>
<span class="c1">## attr(,&quot;index.type&quot;)</span>
<span class="c1">## [1] &quot;chars&quot;</span>
<span class="c1">## attr(,&quot;useBytes&quot;)</span>
<span class="c1">## [1] TRUE</span>
<span class="c1">## </span>
<span class="c1">## [[4]]</span>
<span class="c1">## [1] -1</span>
<span class="c1">## attr(,&quot;match.length&quot;)</span>
<span class="c1">## [1] -1</span>
<span class="c1">## attr(,&quot;index.type&quot;)</span>
<span class="c1">## [1] &quot;chars&quot;</span>
<span class="c1">## attr(,&quot;useBytes&quot;)</span>
<span class="c1">## [1] TRUE</span>
</pre></div>
</div>
<p>As we have noted in <a class="reference internal" href="140-list.html#sec-list-use-cases"><span class="std std-numref">Section¬†4.4.2</span></a>,
wrapping the results in a list was a clever choice as the number
of matches can obviously vary between strings.</p>
<p>In <a class="reference internal" href="170-function.html#sec-fun-prog"><span class="std std-numref">Section¬†7.2</span></a>, we will take a look at the
<strong class="command">Map</strong> function, which, along with <strong class="command">substring</strong> introduced
below, can aid in getting the most out of such data.
Meanwhile, let us just mention that <strong class="command">regmatches</strong>
extracts the matching substrings:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">regmatches</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nf">gregexpr</span><span class="p">(</span><span class="s">&quot;(?i)spam\\p{L}*&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span>
<span class="c1">## [[1]]</span>
<span class="c1">## [1] &quot;spam&quot;</span>
<span class="c1">## </span>
<span class="c1">## [[2]]</span>
<span class="c1">## [1] &quot;spammite&quot; &quot;spam&quot;    </span>
<span class="c1">## </span>
<span class="c1">## [[3]]</span>
<span class="c1">## [1] &quot;SPAM&quot;</span>
<span class="c1">## </span>
<span class="c1">## [[4]]</span>
<span class="c1">## character(0)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>(*) Let us consider what happens when a regular expression contains
parenthesised subexpressions (capture groups).</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">&lt;-</span> <span class="s">&quot;(?&lt;basename&gt;[^. ]+)\\.(?&lt;extension&gt;[^ ]*)&quot;</span>
</pre></div>
</div>
<p>The above regex consists of two such parts.
The first one is labelled ‚Äú<code class="docutils literal notranslate"><span class="pre">basename</span></code>‚Äù and is comprised of a number
of arbitrary characters except for the space and the dot.
The second group, named ‚Äú<code class="docutils literal notranslate"><span class="pre">extension</span></code>‚Äù is a substring of anything but the space.
These two are separated by a dot.</p>
<p>Such a pattern can be used for unpacking space-delimited lists of
file names.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">&lt;-</span> <span class="s">&quot;dataset.csv.gz something_else.txt spam&quot;</span>
<span class="nf">regexpr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [1] 1</span>
<span class="c1">## attr(,&quot;match.length&quot;)</span>
<span class="c1">## [1] 14</span>
<span class="c1">## attr(,&quot;index.type&quot;)</span>
<span class="c1">## [1] &quot;chars&quot;</span>
<span class="c1">## attr(,&quot;useBytes&quot;)</span>
<span class="c1">## [1] TRUE</span>
<span class="c1">## attr(,&quot;capture.start&quot;)</span>
<span class="c1">##      basename extension</span>
<span class="c1">## [1,]        1         9</span>
<span class="c1">## attr(,&quot;capture.length&quot;)</span>
<span class="c1">##      basename extension</span>
<span class="c1">## [1,]        7         6</span>
<span class="c1">## attr(,&quot;capture.names&quot;)</span>
<span class="c1">## [1] &quot;basename&quot;  &quot;extension&quot;</span>
<span class="nf">gregexpr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [[1]]</span>
<span class="c1">## [1]  1 16</span>
<span class="c1">## attr(,&quot;match.length&quot;)</span>
<span class="c1">## [1] 14 18</span>
<span class="c1">## attr(,&quot;index.type&quot;)</span>
<span class="c1">## [1] &quot;chars&quot;</span>
<span class="c1">## attr(,&quot;useBytes&quot;)</span>
<span class="c1">## [1] TRUE</span>
<span class="c1">## attr(,&quot;capture.start&quot;)</span>
<span class="c1">##      basename extension</span>
<span class="c1">## [1,]        1         9</span>
<span class="c1">## [2,]       16        31</span>
<span class="c1">## attr(,&quot;capture.length&quot;)</span>
<span class="c1">##      basename extension</span>
<span class="c1">## [1,]        7         6</span>
<span class="c1">## [2,]       14         3</span>
<span class="c1">## attr(,&quot;capture.names&quot;)</span>
<span class="c1">## [1] &quot;basename&quot;  &quot;extension&quot;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">capture.*</span></code> attributes give us access to the matches to the individual
capture groups, i.e., the <code class="docutils literal notranslate"><span class="pre">basename</span></code> and the <code class="docutils literal notranslate"><span class="pre">extension</span></code>.</p>
</div>
<div class="proof proof-type-exercise" id="id17">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.3</span>
        
    </div><div class="proof-content">
<p>(*) Check out the difference between the results generated by
<strong class="command">regexec</strong> and <strong class="command">regexpr</strong> as well as
<strong class="command">gregexec</strong> and <strong class="command">gregexpr</strong>.</p>
</div></div></section>
<section id="replacing-pattern-occurrences">
<h3><span class="section-number">6.2.6. </span>Replacing Pattern Occurrences<a class="headerlink" href="#replacing-pattern-occurrences" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong class="command">sub</strong> and <strong class="command">gsub</strong> can replace first and all, respectively,
matches to a pattern:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;y spammite spam&quot;</span><span class="p">,</span> <span class="s">&quot;yummy SPAM&quot;</span><span class="p">,</span> <span class="s">&quot;sram&quot;</span><span class="p">)</span>
<span class="nf">sub</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;ham&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">fixed</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [1] &quot;ham&quot;            &quot;y hammite spam&quot; &quot;yummy SPAM&quot;     &quot;sram&quot;</span>
<span class="nf">gsub</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span> <span class="s">&quot;ham&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">fixed</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [1] &quot;ham&quot;           &quot;y hammite ham&quot; &quot;yummy SPAM&quot;    &quot;sram&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>(*)
If a regex features some capture groups, matches thereto
can be mentioned not only in the pattern itself,
but also in the replacement string:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">gsub</span><span class="p">(</span><span class="s">&quot;(\\p{L})\\p{L}\\1&quot;</span><span class="p">,</span> <span class="s">&quot;\\1&quot;</span><span class="p">,</span> <span class="s">&quot;aha egg gag NaN spam&quot;</span><span class="p">,</span> <span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [1] &quot;a egg g N spam&quot;</span>
</pre></div>
</div>
<p>The above matches a letter (it is a capture group),
another letter, and the former letter again. Each
such palindrome of length 3 is replaced with just the repeated
letter.</p>
</div>
<div class="proof proof-type-exercise" id="id18">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.4</span>
        
    </div><div class="proof-content">
<p>(*) Display the source code of <strong class="command">glob2rx</strong> by calling
<strong class="command">print</strong><code class="code docutils literal notranslate"><span class="pre">(glob2rx)</span></code>
and study how this function converts wildcards such as <code class="regexp docutils literal notranslate"><span class="pre">file???.*</span></code>
or <code class="regexp docutils literal notranslate"><span class="pre">*.csv</span></code> to regular expressions that can be passed to, e.g.,
<strong class="command">list.files</strong>.</p>
</div></div></section>
<section id="splitting-strings-into-tokens">
<h3><span class="section-number">6.2.7. </span>Splitting Strings into Tokens<a class="headerlink" href="#splitting-strings-into-tokens" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong class="command">strsplit</strong> divides each string in a character vector into chunks.
This time, though, the search pattern, specifying the token delimiter,
is given as the second argument:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">strsplit</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam;spam;eggs;;bacon&quot;</span><span class="p">,</span> <span class="s">&quot;spam&quot;</span><span class="p">),</span> <span class="s">&quot;;&quot;</span><span class="p">,</span> <span class="n">fixed</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [[1]]</span>
<span class="c1">## [1] &quot;spam&quot;  &quot;spam&quot;  &quot;eggs&quot;  &quot;&quot;      &quot;bacon&quot;</span>
<span class="c1">## </span>
<span class="c1">## [[2]]</span>
<span class="c1">## [1] &quot;spam&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="other-string-operations">
<h2><span class="section-number">6.3. </span>Other String Operations<a class="headerlink" href="#other-string-operations" title="Permalink to this heading">ÔÉÅ</a></h2>
<section id="extracting-substrings">
<h3><span class="section-number">6.3.1. </span>Extracting Substrings<a class="headerlink" href="#extracting-substrings" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong class="command">substring</strong> extracts parts of strings between given character position
ranges.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">substring</span><span class="p">(</span><span class="s">&quot;spammity spam&quot;</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>  <span class="c1"># from 1st to 4th character</span>
<span class="c1">## [1] &quot;spam&quot;</span>
<span class="nf">substring</span><span class="p">(</span><span class="s">&quot;spammity spam&quot;</span><span class="p">,</span> <span class="m">10</span><span class="p">)</span>  <span class="c1"># from 10th to end</span>
<span class="c1">## [1] &quot;spam&quot;</span>
<span class="nf">substring</span><span class="p">(</span><span class="s">&quot;spammity spam&quot;</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">10</span><span class="p">),</span> <span class="nf">c</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="m">14</span><span class="p">))</span>  <span class="c1"># vectorisation</span>
<span class="c1">## [1] &quot;spam&quot; &quot;spam&quot;</span>
<span class="nf">substring</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;spammity spam&quot;</span><span class="p">,</span> <span class="s">&quot;bacon and eggs&quot;</span><span class="p">),</span> <span class="m">1</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">))</span>
<span class="c1">## [1] &quot;spam&quot;  &quot;bacon&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is also a replacement (compare <a class="reference internal" href="210-design.html#sec-replacementfun"><span class="std std-numref">Section¬†9.4.6</span></a>)
version of the above:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">&lt;-</span> <span class="s">&quot;spam, spam, bacon, and spam&quot;</span>
<span class="nf">substring</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">11</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="s">&quot;eggs&quot;</span>
<span class="nf">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## [1] &quot;spam, eggs, bacon, and spam&quot;</span>
</pre></div>
</div>
<p>Unfortunately, the number of characters in the replacement string
should not exceed the length of the part being substituted
(try ‚Äú<code class="docutils literal notranslate"><span class="pre">chickpeas</span></code>‚Äù instead of ‚Äú<code class="docutils literal notranslate"><span class="pre">eggs</span></code>‚Äù).
However, substring replacement can be written as
a composition of substring extraction and concatenation:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">paste</span><span class="p">(</span><span class="nf">substring</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">6</span><span class="p">),</span> <span class="s">&quot;chickpeas&quot;</span><span class="p">,</span> <span class="nf">substring</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="m">11</span><span class="p">),</span> <span class="n">sep</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="c1">## [1] &quot;spam, chickpeas, bacon, and spam&quot;</span>
</pre></div>
</div>
</div>
<div class="proof proof-type-exercise" id="id19">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.5</span>
        
    </div><div class="proof-content">
<p>Take the output generated by <strong class="command">regexpr</strong> and apply <strong class="command">substring</strong>
to extract the pattern occurrences. If there is no match in some string,
the corresponding output should be <code class="docutils literal notranslate"><span class="pre">NA</span></code>.</p>
</div></div></section>
<section id="translating-characters">
<h3><span class="section-number">6.3.2. </span>Translating Characters<a class="headerlink" href="#translating-characters" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong class="command">tolower</strong> and <strong class="command">toupper</strong> can be used to convert between
lower and upper case:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">toupper</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">)</span>
<span class="c1">## [1] &quot;SPAM&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Just like many other string operations in base R, these functions
perform very simple character substitutions and they might not be valid
in natural language processing tasks. For instance, <em>gro√ü</em> is <strong>not</strong>
converted to <em>GROSS</em>, which is the correct case folding in German.</p>
</div>
<p>Moreover, <strong class="command">chartr</strong> translates individual characters:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">chartr</span><span class="p">(</span><span class="s">&quot;\\&quot;</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">,</span> <span class="s">&quot;c:\\windows\\system\\cmd.exe&quot;</span><span class="p">)</span>  <span class="c1"># chartr(old, new, x)</span>
<span class="c1">## [1] &quot;c:/windows/system/cmd.exe&quot;</span>
<span class="nf">chartr</span><span class="p">(</span><span class="s">&quot;([S&quot;</span><span class="p">,</span> <span class="s">&quot;)]*&quot;</span><span class="p">,</span> <span class="s">&quot;:( :S :[&quot;</span><span class="p">)</span>
<span class="c1">## [1] &quot;:) :* :]&quot;</span>
</pre></div>
</div>
<p>In the first line, we replace each backslash with slash.
The second example replaces ‚Äú<code class="docutils literal notranslate"><span class="pre">(</span></code>‚Äù, ‚Äú<code class="docutils literal notranslate"><span class="pre">[</span></code>‚Äù, and ‚Äú<code class="docutils literal notranslate"><span class="pre">S</span></code>‚Äù with
‚Äú<code class="docutils literal notranslate"><span class="pre">)</span></code>‚Äù, ‚Äú<code class="docutils literal notranslate"><span class="pre">]</span></code>‚Äù, and ‚Äú<code class="docutils literal notranslate"><span class="pre">*</span></code>‚Äù, respectively.</p>
</section>
<section id="ordering-strings">
<h3><span class="section-number">6.3.3. </span>Ordering Strings<a class="headerlink" href="#ordering-strings" title="Permalink to this heading">ÔÉÅ</a></h3>
<p>We have previously mentioned that operators such
as `<strong class="command">&lt;</strong>` and `<strong class="command">&gt;=</strong>`
as well as functions like <strong class="command">sort</strong>, <strong class="command">order</strong>,
<strong class="command">rank</strong>, but also <strong class="command">xtfrm</strong><a class="footnote-reference brackets" href="#footxtfrm" id="id8">3</a>
are based on the lexicographic ordering of strings.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">sort</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;ch≈Çodny&quot;</span><span class="p">,</span> <span class="s">&quot;hardy&quot;</span><span class="p">,</span> <span class="s">&quot;chladn√Ω&quot;</span><span class="p">,</span> <span class="s">&quot;hladn√Ω&quot;</span><span class="p">))</span>
<span class="c1">## [1] &quot;chladn√Ω&quot; &quot;ch≈Çodny&quot; &quot;hardy&quot;   &quot;hladn√Ω&quot;</span>
</pre></div>
</div>
<p>It is worth noting that the ordering is dependent on the currently
selected locale, see <strong class="command">Sys.getlocale</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;LC_COLLATE&quot;)</span></code>.
For instance, in the Slovak language setting, we would obtain
<code class="docutils literal notranslate"><span class="pre">&quot;hardy&quot;</span></code> &lt; <code class="docutils literal notranslate"><span class="pre">&quot;hladn√Ω&quot;</span></code> &lt; <code class="docutils literal notranslate"><span class="pre">&quot;chladn√Ω&quot;</span></code> &lt; <code class="docutils literal notranslate"><span class="pre">&quot;ch≈Çodny&quot;</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Many ‚Äústructured‚Äù data items can be displayed or transmitted
as human-readable strings. In particular, we know that
<strong class="command">as.numeric</strong> can be used to convert a string to a number.
Moreover, in <a class="reference internal" href="220-s3.html#sec-datetime"><span class="std std-numref">Section¬†10.3.1</span></a> we will discuss
date-time objects such as <code class="docutils literal notranslate"><span class="pre">&quot;1970-01-01</span> <span class="pre">00:00:00</span> <span class="pre">GMT&quot;</span></code>.
We will be processing them with specialised functions such as
<strong class="command">strptime</strong> and <strong class="command">strftime</strong>.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>(*)
As we have mentioned, many string operations in base R are not necessarily
portable. The <strong class="program">stringx</strong> package <span id="id9">[<a class="reference internal" href="999-bibliography.html#id52" title="Gagolewski, M. (2023).  stringx: Drop-in replacements for base R string functions powered by stringi. URL: https://stringx.gagolewski.com.">22</a>]</span> defines drop-in,
‚Äúfixed‚Äù replacements therefor. They are based on the  International Components
for Unicode (<a class="reference external" href="http://site.icu-project.org/">ICU</a>) library, which is a
de facto standard for the processing of Unicode text,
and the R package <strong class="program">stringi</strong>; see <span id="id10">[<a class="reference internal" href="999-bibliography.html#id53" title="Gagolewski, M. (2022).  stringi: Fast and portable character string processing in R. Journal of Statistical Software, 103(2):1‚Äì59. URL: https://stringi.gagolewski.com, DOI: 10.18637/jss.v103.i02.">21</a>]</span>.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># call install.packages(&quot;stringx&quot;) first</span>
<span class="nf">suppressPackageStartupMessages</span><span class="p">(</span><span class="nf">library</span><span class="p">(</span><span class="s">&quot;stringx&quot;</span><span class="p">))</span>  <span class="c1"># load the package</span>
<span class="nf">sort</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;ch≈Çodny&quot;</span><span class="p">,</span> <span class="s">&quot;hardy&quot;</span><span class="p">,</span> <span class="s">&quot;chladn√Ω&quot;</span><span class="p">,</span> <span class="s">&quot;hladn√Ω&quot;</span><span class="p">),</span> <span class="n">locale</span><span class="o">=</span><span class="s">&quot;sk_SK&quot;</span><span class="p">)</span>
<span class="c1">## [1] &quot;hardy&quot;   &quot;hladn√Ω&quot;  &quot;chladn√Ω&quot; &quot;ch≈Çodny&quot;</span>
<span class="nf">toupper</span><span class="p">(</span><span class="s">&quot;gro\u00DF&quot;</span><span class="p">)</span>  <span class="c1"># compare base::toupper(&quot;gro\u00DF&quot;)</span>
<span class="c1">## [1] &quot;GROSS&quot;</span>
<span class="nf">detach</span><span class="p">(</span><span class="s">&quot;package:stringx&quot;</span><span class="p">)</span>  <span class="c1"># unload the package</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="other-atomic-vector-types">
<h2><span class="section-number">6.4. </span>Other Atomic Vector Types (*)<a class="headerlink" href="#other-atomic-vector-types" title="Permalink to this heading">ÔÉÅ</a></h2>
<p>We have discussed four vector types: <code class="docutils literal notranslate"><span class="pre">logical</span></code>, <code class="docutils literal notranslate"><span class="pre">double</span></code>, <code class="docutils literal notranslate"><span class="pre">character</span></code>,
and <code class="docutils literal notranslate"><span class="pre">list</span></code> (the latter being a generic-recursive vector).
To get the complete picture of the sequence-like types in R,
let us briefly mention <code class="docutils literal notranslate"><span class="pre">integer</span></code>, <code class="docutils literal notranslate"><span class="pre">complex</span></code>, and <code class="docutils literal notranslate"><span class="pre">raw</span></code> atomic types,
so that we are not surprised when we encounter them.</p>
<section id="integer-vectors">
<span id="sec-integer"></span><h3><span class="section-number">6.4.1. </span>Integer Vectors (*)<a class="headerlink" href="#integer-vectors" title="Permalink to this heading">ÔÉÅ</a></h3>
<p>Integer scalars can be input manually by using the
<code class="docutils literal notranslate"><span class="pre">L</span></code> suffix:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">x</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">1L</span><span class="p">,</span> <span class="m">2L</span><span class="p">,</span> <span class="m">-1L</span><span class="p">,</span> <span class="kc">NA_integer_</span><span class="p">))</span>  <span class="c1"># looks like numeric</span>
<span class="c1">## [1]  1  2 -1 NA</span>
<span class="nf">typeof</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  <span class="c1"># but is integer</span>
<span class="c1">## [1] &quot;integer&quot;</span>
</pre></div>
</div>
<p>Some functions return them in certain contexts<a class="footnote-reference brackets" href="#footaltrepint" id="id11">4</a>:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">typeof</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">)</span>  <span class="c1"># seq(1, 10) as well, but not seq(1, 10, 1)</span>
<span class="c1">## [1] &quot;integer&quot;</span>
<span class="nf">as.integer</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">-1.1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1.9</span><span class="p">,</span> <span class="m">2.1</span><span class="p">))</span>  <span class="c1"># truncate/round towards 0</span>
<span class="c1">## [1] -1  0  1  2</span>
</pre></div>
</div>
<p>In the vast majority of expressions, integer vectors
behave like numeric ones, and are silently coerced to <code class="docutils literal notranslate"><span class="pre">double</span></code>
if need be, so there is no real practical reason to distinguish between them
(they are of <em>internal</em> interest, e.g.,
when writing C/C++ extensions; see <code class="xref std std-numref docutils literal notranslate"><span class="pre">Chapter</span> <span class="pre">%s</span></code>).
For example:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="m">1L</span><span class="o">/</span><span class="m">2L</span>  <span class="c1"># like 1/2 == 1.0/2.0</span>
<span class="c1">## [1] 0.5</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>(*)
R <code class="docutils literal notranslate"><span class="pre">integer</span></code>s are 32-bit signed types.
The <code class="docutils literal notranslate"><span class="pre">double</span></code> type can store more integers than them
(with the maximal contiguously representable integer
being <span class="math notranslate nohighlight">\(2^{53}\)</span> vs <span class="math notranslate nohighlight">\(2^{31}-1\)</span> in the former case; see <a class="reference internal" href="130-logical.html#sec-fp"><span class="std std-numref">Section¬†3.2.3</span></a>):</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">as.integer</span><span class="p">(</span><span class="m">2</span><span class="o">^</span><span class="m">31-1</span><span class="p">)</span> <span class="o">+</span> <span class="m">1L</span>  <span class="c1"># 32-bit integer overflow</span>
<span class="c1">## Warning in as.integer(2^31 - 1) + 1L: NAs produced by integer overflow</span>
<span class="c1">## [1] NA</span>
<span class="nf">as.integer</span><span class="p">(</span><span class="m">2</span><span class="o">^</span><span class="m">31-1</span><span class="p">)</span> <span class="o">+</span> <span class="m">1</span> <span class="o">==</span> <span class="m">2</span><span class="o">^</span><span class="m">31</span> <span class="c1"># integer+double == double ‚Äì OK</span>
<span class="c1">## [1] TRUE</span>
<span class="p">(</span><span class="m">2</span><span class="o">^</span><span class="m">53</span> <span class="o">-</span> <span class="m">1</span><span class="p">)</span> <span class="o">+</span> <span class="m">1</span> <span class="o">==</span> <span class="m">2</span><span class="o">^</span><span class="m">53</span>  <span class="c1"># OK</span>
<span class="c1">## [1] TRUE</span>
<span class="p">(</span><span class="m">2</span><span class="o">^</span><span class="m">53</span> <span class="o">+</span> <span class="m">1</span><span class="p">)</span> <span class="o">-</span> <span class="m">1</span> <span class="o">==</span> <span class="m">2</span><span class="o">^</span><span class="m">53</span>  <span class="c1"># lost due to FP rounding, left result is 2^53 - 1</span>
<span class="c1">## [1] FALSE</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since R 3.0, there is support for vectors longer
than <span class="math notranslate nohighlight">\(2^{31}-1\)</span> elements. As there are no 64-bit integers
in R, these are indexed by doubles anyway (as we have been doing
all this time).
Interestingly, <code class="docutils literal notranslate"><span class="pre">x[1.9]</span></code> is the same as <code class="docutils literal notranslate"><span class="pre">x[1]</span></code>
and <code class="docutils literal notranslate"><span class="pre">x[-1.9]</span></code> means <code class="docutils literal notranslate"><span class="pre">x[-1]</span></code> (truncation of the fractional part).
This is why the notation like <code class="docutils literal notranslate"><span class="pre">x[</span></code><strong class="command">length</strong><code class="code docutils literal notranslate"><span class="pre">(x)*0.2]</span></code>
works regardless of whether the length of <code class="docutils literal notranslate"><span class="pre">x</span></code> is a multiple of 5
or not, which is neat.</p>
</div>
</section>
<section id="raw-vectors">
<span id="sec-raw"></span><h3><span class="section-number">6.4.2. </span>Raw Vectors (*)<a class="headerlink" href="#raw-vectors" title="Permalink to this heading">ÔÉÅ</a></h3>
<p>Vectors of type <code class="docutils literal notranslate"><span class="pre">raw</span></code> can store bytes, i.e., unsigned
8-bit integers, whose range is 0-255
(there are no raw <code class="docutils literal notranslate"><span class="pre">NA</span></code>s).
For example:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">as.raw</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">-1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span> <span class="m">254</span><span class="p">,</span> <span class="m">255</span><span class="p">,</span> <span class="m">256</span><span class="p">,</span> <span class="kc">NA</span><span class="p">))</span>
<span class="c1">## Warning: out-of-range values treated as 0 in coercion to raw</span>
<span class="c1">## [1] 00 00 01 02 c0 fe ff 00 00</span>
</pre></div>
</div>
<p>They are displayed as two-digit hexadecimal (base-16) numbers.
Also note that we may enter such numbers using the ‚Äú<code class="docutils literal notranslate"><span class="pre">0x</span></code>‚Äù prefix.</p>
<p>There are only few functions that deal with such vectors:
e.g., <strong class="command">readBin</strong>, <strong class="command">charToRaw</strong>,
and <strong class="command">rawToChar</strong>.</p>
</section>
<section id="complex-vectors">
<span id="sec-complex"></span><h3><span class="section-number">6.4.3. </span>Complex Vectors (*)<a class="headerlink" href="#complex-vectors" title="Permalink to this heading">ÔÉÅ</a></h3>
<p>We can also play with vectors of type <code class="docutils literal notranslate"><span class="pre">complex</span></code>,
with ‚Äú<code class="docutils literal notranslate"><span class="pre">1i</span></code>‚Äù representing the imaginary unit, <span class="math notranslate nohighlight">\(\sqrt{-1}\)</span>.
Complex numbers appear in quite a few engineering or scientific
applications, e.g., in physics, electronics, or signal processing
and are (at least: should be) part of many university-level
subjects or textbooks in mathematics<a class="footnote-reference brackets" href="#footcomplexbook" id="id12">5</a>.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">1i</span><span class="p">,</span> <span class="kc">pi</span><span class="o">+</span><span class="kc">pi</span><span class="o">*</span><span class="m">1i</span><span class="p">,</span> <span class="kc">NA_complex_</span><span class="p">)</span>
<span class="c1">## [1] 0.0000+0.0000i 0.0000+1.0000i 3.1416+3.1416i             NA</span>
</pre></div>
</div>
<p>Apart from the basic operators, mathematical and aggregation functions,
procedures like <strong class="command">fft</strong>, <strong class="command">solve</strong>,
<strong class="command">qr</strong>, or <strong class="command">svd</strong>
can be fed with or produce such data.
For more details, see <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;complex&quot;)</span></code>
and some matrix examples in <a class="reference internal" href="230-matrix.html#chap-matrix"><span class="std std-numref">Chapter 11</span></a>.</p>
</section>
</section>
<section id="exercises">
<h2><span class="section-number">6.5. </span>Exercises<a class="headerlink" href="#exercises" title="Permalink to this heading">ÔÉÅ</a></h2>
<p>Exercises marked with (*) might require tinkering with regular expressions
or third-party R packages.</p>
<div class="proof proof-type-exercise" id="id20">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.6</span>
        
    </div><div class="proof-content">
<p>Answer the following questions:</p>
<ul class="simple">
<li><p>How many characters are there in the string <code class="docutils literal notranslate"><span class="pre">&quot;ab\n\\\t\\\\\&quot;&quot;</span></code>?
What about <code class="docutils literal notranslate"><span class="pre">&quot;-{ab\n\\\t\\\\\&quot;-)}-&quot;</span></code>?</p></li>
<li><p>What is the result of calling
‚Äú<strong class="command">paste</strong><code class="code docutils literal notranslate"><span class="pre">(NA,</span> <span class="pre">1:5,</span> <span class="pre">collapse=&quot;&quot;)</span></code>‚Äù?</p></li>
<li><p>What is the meaning of the following <strong class="command">sprintf</strong> format strings:
<code class="docutils literal notranslate"><span class="pre">&quot;%s&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;%20s&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;%-20s&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;%f&quot;</span></code>,  <code class="docutils literal notranslate"><span class="pre">&quot;%g&quot;</span></code>,  <code class="docutils literal notranslate"><span class="pre">&quot;%e&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;%5f&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;%5.2f%%&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;%.2f&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;%0+5f&quot;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&quot;[%+-5.2f]&quot;</span></code>?</p></li>
<li><p>What is the difference between <strong class="command">regexpr</strong> and <strong class="command">gregexpr</strong>?
What does ‚Äúg‚Äù in the latter name stand for?</p></li>
<li><p>What is the result of a call to
‚Äú<strong class="command">grepl</strong><code class="code docutils literal notranslate"><span class="pre">(</span></code><strong class="command">c</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;spam&quot;,</span> <span class="pre">&quot;spammity</span> <span class="pre">spam&quot;,</span> <span class="pre">&quot;aubergines&quot;),</span> <span class="pre">&quot;spam&quot;)</span></code>‚Äù?</p></li>
<li><p>Is it always the case that ‚Äú<code class="docutils literal notranslate"><span class="pre">&quot;Aaron&quot;</span> <span class="pre">&lt;</span> <span class="pre">&quot;Zorro&quot;</span></code>‚Äù?</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">x</span></code> is a character vector, is ‚Äú<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">==</span> <span class="pre">x</span></code>‚Äù always equal to <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>?</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> are character vectors of lengths <em>n</em> and <em>m</em>, respectively,
what is the length of the output of ‚Äú<strong class="command">match</strong><code class="code docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y)</span></code>‚Äù?</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">x</span></code> is a named vector, why there is a difference between
‚Äú<code class="docutils literal notranslate"><span class="pre">x[NA]</span></code>‚Äù and ‚Äú<code class="docutils literal notranslate"><span class="pre">x[NA_character_]</span></code>‚Äù?</p></li>
<li><p>What is the difference between ‚Äú<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">==</span> <span class="pre">y</span></code>‚Äù and ‚Äú<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">%in%</span> <span class="pre">y</span></code>‚Äù?</p></li>
</ul>
</div></div><div class="proof proof-type-exercise" id="id21">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.7</span>
        
    </div><div class="proof-content">
<p>Let <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, and <code class="docutils literal notranslate"><span class="pre">z</span></code> be atomic vectors and <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> be single strings.
Generate the same results as
‚Äú<strong class="command">pastena</strong><code class="code docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">collapse=b)</span></code>‚Äù,
‚Äú<strong class="command">pastena</strong><code class="code docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">sep=a)</span></code>‚Äù,
‚Äú<strong class="command">pastena</strong><code class="code docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">sep=a,</span> <span class="pre">collapse=b)</span></code>‚Äù,
‚Äú<strong class="command">pastena</strong><code class="code docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">z,</span> <span class="pre">sep=a)</span></code>‚Äù,
‚Äú<strong class="command">pastena</strong><code class="code docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">z,</span> <span class="pre">sep=a,</span> <span class="pre">collapse=b)</span></code>‚Äù,
assuming that <strong class="command">pastena</strong> is a version of <strong class="command">paste</strong>
(which we do not have) that handles missing data in a way consistent
with most other functions.</p>
</div></div><div class="proof proof-type-exercise" id="id22">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.8</span>
        
    </div><div class="proof-content">
<p>Based on <strong class="command">list.files</strong> and <strong class="command">glob2rx</strong>,
generate the list of all PDFs on your computer.
Then, using <strong class="command">file.size</strong> filter out the files smaller
than 10 MiB.</p>
</div></div><div class="proof proof-type-exercise" id="id23">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.9</span>
        
    </div><div class="proof-content">
<p>Read a text file that stores a long paragraph of some banal prose.
Concatenate all the lines to form a single, long string.
Using <strong class="command">strwrap</strong> and <strong class="command">cat</strong>,
output the paragraph on the console,
nicely formatted to fit an aesthetic width, say, 60 text columns.</p>
</div></div><div class="proof proof-type-exercise" id="id24">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.10</span>
        
    </div><div class="proof-content">
<p>(*) Implement your own, simplified version of <strong class="command">basename</strong> and <strong class="command">dirname</strong>.</p>
</div></div><div class="proof proof-type-exercise" id="id25">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.11</span>
        
    </div><div class="proof-content">
<p>(*) Implement an operation similar to <strong class="command">trimws</strong> using the functions
introduced in this chapter.</p>
</div></div><div class="proof proof-type-exercise" id="id26">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.12</span>
        
    </div><div class="proof-content">
<p>(*) Write a regex that extracts all <em>words</em> from each string in a
given character vector.</p>
</div></div><div class="proof proof-type-exercise" id="id27">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.13</span>
        
    </div><div class="proof-content">
<p>(*) Write a regex that extracts, from each string
in a character vector, all:</p>
<ul class="simple">
<li><p>integers numbers (signed or unsigned),</p></li>
<li><p>floating-point numbers,</p></li>
<li><p>numbers of any kind (including those in scientific notation),</p></li>
<li><p>#hashtags,</p></li>
<li><p>email&#64;addresses,</p></li>
<li><p>hyperlinks of the form http://‚Ä¶ and https://‚Ä¶.</p></li>
</ul>
</div></div><div class="proof proof-type-exercise" id="id28">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.14</span>
        
    </div><div class="proof-content">
<p>(*) What does <code class="docutils literal notranslate"><span class="pre">42i</span></code>, <code class="docutils literal notranslate"><span class="pre">42L</span></code>, and <code class="docutils literal notranslate"><span class="pre">0x42</span></code> stand for?</p>
</div></div><div class="proof proof-type-exercise" id="id29">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.15</span>
        
    </div><div class="proof-content">
<p>(*) Check out <strong class="command">stri_sort</strong> in the <strong class="program">stringi</strong> package
(or <strong class="command">sort.character</strong> in <strong class="program">stringx</strong>) for a way
to obtain an ordering like <code class="docutils literal notranslate"><span class="pre">&quot;a1&quot;</span></code> &lt; <code class="docutils literal notranslate"><span class="pre">&quot;a2&quot;</span></code> &lt; <code class="docutils literal notranslate"><span class="pre">&quot;a10&quot;</span></code> &lt; <code class="docutils literal notranslate"><span class="pre">&quot;a11&quot;</span></code> &lt; <code class="docutils literal notranslate"><span class="pre">&quot;a100&quot;</span></code>.</p>
</div></div><div class="proof proof-type-exercise" id="id30">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.16</span>
        
    </div><div class="proof-content">
<p>(*)
In <strong class="command">sprintf</strong>,
the formatter <code class="docutils literal notranslate"><span class="pre">&quot;%20s&quot;</span></code> means that if a string is less than 20 bytes
long, the remaining bytes will be replaced with spaces.
Only for ASCII characters (English letters, digits, some punctuation marks, etc.) it is true that one character is represented by 1 byte.
Other Unicode code points can take up between 2 and 4 bytes.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">cat</span><span class="p">(</span><span class="nf">sprintf</span><span class="p">(</span><span class="s">&quot;..%6s..&quot;</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">,</span> <span class="s">&quot;1!&lt;&quot;</span><span class="p">,</span> <span class="s">&quot;a√üc&quot;</span><span class="p">,</span> <span class="s">&quot;ƒÖ√ü¬©&quot;</span><span class="p">)),</span> <span class="n">sep</span><span class="o">=</span><span class="s">&quot;\n&quot;</span><span class="p">)</span>  <span class="c1"># aligned?</span>
<span class="c1">## ..   abc..</span>
<span class="c1">## ..   1!&lt;..</span>
<span class="c1">## ..  a√üc..</span>
<span class="c1">## ..ƒÖ√ü¬©..</span>
</pre></div>
</div>
<p>Use the <strong class="command">stri_pad</strong> function from the <strong class="program">stringi</strong>
package to align the strings aesthetically.
Alternatively, check out <strong class="command">sprintf</strong> from <strong class="program">stringx</strong>.</p>
</div></div><div class="proof proof-type-exercise" id="id31">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.17</span>
        
    </div><div class="proof-content">
<p>(*) Implement an operation similar to <strong class="command">stri_pad</strong>
from <strong class="program">stringi</strong> using the functions introduced in this chapter.</p>
</div></div><hr class="footnotes docutils" />
<dl class="footnote brackets">
<dt class="label" id="footstringcache"><span class="brackets"><a class="fn-backref" href="#id3">1</a></span></dt>
<dd><p>Internally, there is a string cache (a hash table),
so that multiple clones of the same string do not occupy more
RAM than it is necessary.</p>
</dd>
<dt class="label" id="footsprintfwidth"><span class="brackets"><a class="fn-backref" href="#id4">2</a></span></dt>
<dd><p>Actually, this is only true for 8-bit
native encodings. See also <strong class="command">sprintf</strong>
from the <strong class="program">stringx</strong> package which takes the text width,
and not the number of bytes, into account.</p>
</dd>
<dt class="label" id="footxtfrm"><span class="brackets"><a class="fn-backref" href="#id8">3</a></span></dt>
<dd><p>See <a class="reference internal" href="240-data-frame.html#sec-df-order"><span class="std std-numref">Section¬†12.3.1</span></a> for a use case.</p>
</dd>
<dt class="label" id="footaltrepint"><span class="brackets"><a class="fn-backref" href="#id11">4</a></span></dt>
<dd><p>Actually, <code class="docutils literal notranslate"><span class="pre">1:10</span></code> returns an integer vector in a compact
(ALTREP, see <span id="id13">[<a class="reference internal" href="999-bibliography.html#id59" title="Tierney, L., Becker, G., Kalibera, T. (2018).  ALTREP: Alternative Representations for R Objects. URL: https://svn.r-project.org/R/branches/ALTREP/ALTREP.html.">41</a>]</span>)
form; compare the results of the call to ‚Äú<strong class="command">.Internal</strong><code class="code docutils literal notranslate"><span class="pre">(</span></code><strong class="command">inspect</strong><code class="code docutils literal notranslate"><span class="pre">(1:10))</span></code>‚Äù
and ‚Äú<strong class="command">.Internal</strong><code class="code docutils literal notranslate"><span class="pre">(</span></code><strong class="command">inspect</strong><code class="code docutils literal notranslate"><span class="pre">(</span></code><strong class="command">seq</strong><code class="code docutils literal notranslate"><span class="pre">(1,</span> <span class="pre">10,</span> <span class="pre">1)))</span></code>‚Äù. This way, the whole vector
does not have to be allocated which saves memory and time.
At the R level, though, it behaves as any other integer (numeric)
sequence.</p>
</dd>
<dt class="label" id="footcomplexbook"><span class="brackets"><a class="fn-backref" href="#id12">5</a></span></dt>
<dd><p>Even the statistics/machine learning oriented
ones, because of their heavy use of numerical computing, e.g.,
<span id="id14">[<a class="reference internal" href="999-bibliography.html#id25" title="Deisenroth, M.P., Faisal, A.A., Ong, C.S. (2020).  Mathematics for Machine Learning. Cambridge University Press. URL: https://mml-book.com/.">14</a>, <a class="reference internal" href="999-bibliography.html#id38" title="Gentle, J.E. (2007).  Matrix Algebra. Springer.">25</a>]</span>.</p>
</dd>
</dl>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="170-function.html" class="btn btn-neutral float-right" title="7. Functions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="150-indexing.html" class="btn btn-neutral float-left" title="5. Vector Indexing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        Copyright &#169; 2022‚Äì2023 by <a href="https://www.gagolewski.com">Marek Gagolewski</a>. Some rights reserved. Licensed under <a href='https://creativecommons.org/licenses/by-nc-nd/4.0/'>CC BY-NC-ND 4.0</a>.

    Built with <a href="https://sphinx-doc.org/">Sphinx</a>
    and a customised <a href="https://github.com/rtfd/sphinx_rtd_theme">rtd</a>
    theme.
      <span class="lastupdated">
        Last updated on 2023-01-15T14:51:24+1100.
      </span>


    This site will never display any ads: it is a non-profit project.
    It does not collect any data.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>