<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta content="Deep R Programming" name="citation_title" />
<meta content="Marek Gagolewski" name="citation_author" />
<meta content="2023" name="citation_date" />
<meta content="2023" name="citation_publication_date" />
<meta content="https://deepr.gagolewski.com/deepr.pdf" name="citation_pdf_url" />
<meta content="https://deepr.gagolewski.com" name="citation_public_url" />
<meta content="10.5281/zenodo.7490464" name="citation_doi" />
<meta content="Deep R Programming is comprehensive course on one of the most popular languages for data science (statistical computing, graphics, machine learning, data wrangling and analytics). It introduces the base language in-depth. It is aimed at ambitious students, professionals, and researchers who would like to become independent users of this powerful environment. This textbook is a non-profit project. Its online and PDF versions are freely available at https://deepr.gagolewski.com/." name="citation_abstract" />
<meta content="summary" name="twitter:card" />
<meta content="Deep R Programming" name="twitter:title" />
<meta content="Deep R Programming" name="og:title" />
<meta content="Deep R Programming is comprehensive course on one of the most popular languages for data science (statistical computing, graphics, machine learning, data wrangling and analytics). It introduces the base language in-depth. It is aimed at ambitious students, professionals, and researchers who would like to become independent users of this powerful environment. This textbook is a non-profit project. Its online and PDF versions are freely available at https://deepr.gagolewski.com/." name="twitter:description" />
<meta content="Deep R Programming is comprehensive course on one of the most popular languages for data science (statistical computing, graphics, machine learning, data wrangling and analytics). It introduces the base language in-depth. It is aimed at ambitious students, professionals, and researchers who would like to become independent users of this powerful environment. This textbook is a non-profit project. Its online and PDF versions are freely available at https://deepr.gagolewski.com/." name="og:description" />
<meta content="gagolews/deepr" name="og:site_name" />
<meta content="https://deepr.gagolewski.com" name="og:url" />
<meta content="https://deepr.gagolewski.com/_images/cover.png" name="twitter:image" />
<meta content="https://deepr.gagolewski.com/_images/cover.png" name="og:image" />
<meta content="https://deepr.gagolewski.com" name="DC.identifier" />
<meta content="Marek Gagolewski" name="DC.publisher" />
<meta content="INDEX,FOLLOW" name="robots" />
<meta content="book" name="og:type" />
<meta content="9780645571929" name="og:book:isbn" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="7. Functions" href="170-function.html" /><link rel="prev" title="5. Vector indexing" href="150-indexing.html" />
        <link rel="canonical" href="https://deepr.gagolewski.com/chapter/160-character.html" />

    <link rel="shortcut icon" href="../_static/favicon.png"/><!-- Generated with Sphinx 6.2.1 and Furo 2023.03.27 -->
        <title>6. Character vectors - Deep R Programming</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/katex-math.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 95%;
  --admonition-title-font-size: 95%;
  --color-brand-primary: red;
  --color-brand-content: #CC3333;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --admonition-font-size: 95%;
  --admonition-title-font-size: 95%;
  --color-brand-primary: #ff2b53;
  --color-brand-content: #dd3333;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --admonition-font-size: 95%;
  --admonition-title-font-size: 95%;
  --color-brand-primary: #ff2b53;
  --color-brand-content: #dd3333;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Deep R Programming</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto colour theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky">

<span class="sidebar-brand-text">
<a class="sidebar-brand" href="../index.html">Deep R Programming</a>
</span>
<div class="sidebar-brand">
An open-access textbook<br />
by¬†<a href='https://www.gagolewski.com' style="display: contents">Marek¬†Gagolewski</a><br />
v0.9.0.9001 (draft)
</div>
<form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">About</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.gagolewski.com/">Author</a></li>
<li class="toctree-l1"><a class="reference external" href="https://deepr.gagolewski.com/deepr.pdf">This book in PDF</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/deepr/">Report bugs or typos (GitHub)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/teaching-data">Datasets</a></li>
<li class="toctree-l1"><a class="reference external" href="https://datawranglingpy.gagolewski.com">Data wrangling with Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Start here</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="000-preface.html">Preface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deep</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="110-basics.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="120-numeric.html">2. Numeric vectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="130-logical.html">3. Logical vectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="140-list.html">4. Lists and attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="150-indexing.html">5. Vector indexing</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">6. Character vectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="170-function.html">7. Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="180-flow.html">8. Flow of execution</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deeper</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="210-design.html">9. Designing functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="220-s3.html">10. S3 classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="230-matrix.html">11. Matrices and other arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="240-data-frame.html">12. Data frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="250-graphics.html">13. Graphics</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deepest</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="310-compiled.html">14. Interfacing compiled code (**)</a></li>
<li class="toctree-l1"><a class="reference internal" href="320-language.html">15. Unevaluated expressions (*)</a></li>
<li class="toctree-l1"><a class="reference internal" href="330-environment.html">16. Environments and evaluation (*)</a></li>
<li class="toctree-l1"><a class="reference internal" href="340-lazy.html">17. Lazy evaluation (**)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="998-changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="999-bibliography.html">References</a></li>
</ul>

</div></div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/gagolews/deepr/issues/" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto colour theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section class="tex2jax_ignore mathjax_ignore" id="character-vectors">
<span id="chap-character"></span><h1><span class="section-number">6. </span>Character vectors<a class="headerlink" href="#character-vectors" title="Permalink to this heading">#</a></h1>
<blockquote>
<div><p><em>The open-access textbook</em>
Deep R Programming <em>by <a class="reference external" href="https://www.gagolewski.com">Marek Gagolewski</a>
is, and will remain, freely available for everyone‚Äôs enjoyment
(also in <a class="reference external" href="https://deepr.gagolewski.com/deepr.pdf">PDF</a>).
It is a non-profit project.</em>
<strong>This book is still a work in progress.</strong> <em>Beta versions
of all chapters are already available (proofreading and copyediting pending). In the meantime,</em> <strong>any
<a class="reference external" href="https://github.com/gagolews/deepr/issues">bug/typos reports/fixes</a>
are appreciated.</strong>
<em>Although available online, this is a whole course.
It should be read from the beginning to the end.
Refer to the <a class="reference internal" href="000-preface.html#chap-preface"><span class="std std-ref">Preface</span></a> for general introductory remarks.</em>
<em>Also, check out my other book,
<a class="reference external" href="https://datawranglingpy.gagolewski.com/"><em>Minimalist Data Wrangling with Python</em></a>
<span id="id1">[<a class="reference internal" href="999-bibliography.html#id3" title="Gagolewski, M. (2022).  Minimalist Data Wrangling with Python. Zenodo, Melbourne. URL: https://datawranglingpy.gagolewski.com/, DOI: 10.5281/zenodo.6451068.">26</a>]</span>.</em></p>
</div></blockquote>
<p>Text is a universal, portable, economical, and efficient
means of interacting between humans and computers
as well as exchanging data between programs or APIs.
This book is 99% made of text. And, wow, how much valuable knowledge
is in it, innit?</p>
<section id="creating-character-vectors">
<h2><span class="section-number">6.1. </span>Creating character vectors<a class="headerlink" href="#creating-character-vectors" title="Permalink to this heading">#</a></h2>
<section id="inputting-individual-strings">
<span id="sec-string-input-repr"></span><h3><span class="section-number">6.1.1. </span>Inputting individual strings<a class="headerlink" href="#inputting-individual-strings" title="Permalink to this heading">#</a></h3>
<p>Specific character strings are delimited
either by a pair of double or single quotes (apostrophes).</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;a string&quot;</span>
<span class="c1">## [1] &quot;a string&quot;</span>
<span class="s">&#39;another string&#39;</span><span class="w">  </span><span class="c1"># and, of course, neither &#39;like this&quot; nor &quot;like this&#39;</span>
<span class="c1">## [1] &quot;another string&quot;</span>
</pre></div>
</div>
<p>The only difference between these two is
that we cannot directly include, e.g.,
an apostrophe in a single quote-delimited string.
On the other hand, <code class="docutils literal notranslate"><span class="pre">&quot;'tis</span> <span class="pre">good</span> <span class="pre">ol'</span> <span class="pre">spam&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">'I</span> <span class="pre">&quot;love&quot;</span> <span class="pre">bacon'</span></code>
are both okay.</p>
<p>However, to embrace characters whose inclusion might otherwise
be difficult or impossible, we may always employ the so-called
<em>escape sequences</em>.</p>
<p>R uses the backslash, ‚Äú<code class="docutils literal notranslate"><span class="pre">\</span></code>‚Äù, as the escape character, in particular:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">\&quot;</span></code> inputs the double quote character,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\'</span></code> ‚Äì single quote,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\\</span></code> ‚Äì backslash,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\n</span></code> ‚Äì new line.</p></li>
</ul>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;I \&quot;love\&quot; bacon\n\\\&quot;/&quot;</span><span class="p">)</span>
<span class="c1">## [1] &quot;I \&quot;love\&quot; bacon\n\\\&quot;/&quot;</span>
</pre></div>
</div>
<p>The <strong class="command">print</strong> function (which was implicitly called to display
the above object) does not reveal the special meaning of the escape
sequences. Instead, <strong class="command">print</strong> outputs strings in the same way that
we ourselves would follow when inputting them.
The number of characters in <code class="docutils literal notranslate"><span class="pre">x</span></code> is 18, and not 23:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">nchar</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## [1] 18</span>
</pre></div>
</div>
<p>To display the string as-it-really-is, we call:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">cat</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
<span class="c1">## I &quot;love&quot; bacon</span>
<span class="c1">## \&quot;/</span>
</pre></div>
</div>
<p>Raw character constants, where the backslash character‚Äôs special
meaning is disabled, can be entered using the notation
like <code class="docutils literal notranslate"><span class="pre">r&quot;(...)&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">r&quot;{...}&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">r&quot;[...]&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">r&quot;----(...)----&quot;</span></code>, etc.;
see <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;Quotes&quot;)</span></code>. These can be useful when inputting
regular expressions (see below).</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">r</span><span class="s">&quot;(spam\n\\\&quot;maps)&quot;</span>
<span class="nf">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## [1] &quot;spam\\n\\\\\\\&quot;maps&quot;</span>
<span class="nf">cat</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
<span class="c1">## spam\n\\\&quot;maps</span>
</pre></div>
</div>
<p>‚Ä¶ and, of course, the string version of the missing value marker
is ‚Äú<code class="docutils literal notranslate"><span class="pre">NA_character_</span></code>‚Äù.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>(*)
Some output devices may support the following
codes that control the position of the caret (text cursor):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">\b</span></code> ‚Äì backspace (move cursor one column to the left),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\t</span></code> ‚Äì tab (advance to the next tab stop, e.g., a multiply of 8),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\r</span></code> ‚Äì carriage return (move to the beginning of the current line).</p></li>
</ul>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">cat</span><span class="p">(</span><span class="s">&quot;abc\bd\tef\rg\nhij&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
<span class="c1">## gbd     ef</span>
<span class="c1">## hij</span>
</pre></div>
</div>
<p>These can be used on unbuffered outputs
(see, e.g., <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;stderr&quot;)</span></code>)
to display the status of the current operation (a simple ‚Äúanimated‚Äù
progress bar, the print-out of the ETA, or the percentage
of work completed).</p>
<p>Further, certain terminals can also understand
<a class="reference external" href="https://en.wikipedia.org/wiki/ANSI_escape_code">the ECMA-48/ANSI-X3.64 escape sequences</a> of the form ‚Äú<code class="docutils literal notranslate"><span class="pre">\u001b[...</span></code>‚Äù
to control further the cursor‚Äôs position, text colour, and even style.
For example, ‚Äú<code class="docutils literal notranslate"><span class="pre">\u001b[1;31m</span></code>‚Äù outputs bold red text
and ‚Äú<code class="docutils literal notranslate"><span class="pre">\u001b[0m</span></code>‚Äù resets the settings to default.
Give, e.g., ‚Äú<strong class="command">cat</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;\u001b[1;31mspam\u001b[0m&quot;)</span></code>‚Äù
or ‚Äú<strong class="command">cat</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;\u001b[5;36m\u001b[Abacon\u001b[Espam\u001b[0m&quot;)</span></code>‚Äù
a try.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>(*)
The Unicode standard 15.0 (version dated September 2022) defines over 149¬†186
characters, i.a., letters from different scripts, mathematical symbols,
and emojis.
Each is assigned a unique numeric identifier; see the
<a class="reference external" href="https://www.unicode.org/charts/">Unicode Character Code Charts</a>.
For example, the <em>inverted exclamation mark</em> (see the Latin-1 Supplement
section therein) has been mapped to hexadecimal code 0xA1 (or 161 decimally).
Knowing this magic number allows us to specify a
Unicode code point using one of the following escape sequences:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">\uxxxx</span></code> ‚Äì codes using four hexadecimal digits,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\Uxxxxxxxx</span></code> ‚Äì codes using eight hexadecimal digits.</p></li>
</ul>
<p>For instance:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">cat</span><span class="p">(</span><span class="s">&quot;!\u00a1!\U000000a1!&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
<span class="c1">## !¬°!¬°!</span>
</pre></div>
</div>
<p>All R installations allow for working with Unicode strings
(more precisely, UTF-8: a super-encoding that
is native to most UNIX-like boxes, including GNU/Linux and m**OS).
Other operating systems may use some 8-bit encoding as the system one
(e.g., <code class="docutils literal notranslate"><span class="pre">latin1</span></code> or <code class="docutils literal notranslate"><span class="pre">cp1252</span></code>), but they can be
mixed with Unicode seamlessly. See <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;Encoding&quot;)</span></code>,
<strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;iconv&quot;)</span></code>, and <span id="id2">[<a class="reference internal" href="999-bibliography.html#id6" title="Gagolewski, M. (2022).  stringi: Fast and portable character string processing in R. Journal of Statistical Software, 103(2):1‚Äì59. URL: https://stringi.gagolewski.com, DOI: 10.18637/jss.v103.i02.">27</a>]</span> for discussion.</p>
<p>Nevertheless, certain output devices
(web browsers, LaTeX renderers, text terminals)
might be unable to display every possible Unicode
character, e.g., due to some fonts‚Äô being missing.
However, as far as the processing of character data is concerned,
this does not matter: R does it with its eyes closed.</p>
<p>For example, in the <a class="reference external" href="https://deepr.gagolewski.com/deepr.pdf">PDF version</a>
of this adorable book, none
of the following Unicode glyphs are correctly displayed.
Yours cordially did not care about installing appropriate fonts in his
XeLaTeX distribution. However, its
<a class="reference external" href="https://deepr.gagolewski.com">HTML variant</a>,
generated from the same source files as the former,
will likely be rendered by the reader‚Äôs web browser as intended.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">cat</span><span class="p">(</span><span class="s">&quot;\U0001f642\u2665\u0bb8\U0001f923\U0001f60d\u2307&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
<span class="c1">## üôÇ‚ô•‡Æ∏ü§£üòç‚åá</span>
</pre></div>
</div>
</div>
</section>
<section id="many-strings-one-object">
<h3><span class="section-number">6.1.2. </span>Many strings, one object<a class="headerlink" href="#many-strings-one-object" title="Permalink to this heading">#</a></h3>
<p>Less trivial character vectors (meaning, of length greater than one)
can be constructed by means of, e.g., <strong class="command">c</strong> or
<strong class="command">rep</strong><a class="footnote-reference brackets" href="#footstringcache" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="nf">rep</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;bacon&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">NA_character_</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spam&quot;</span><span class="p">))</span>
<span class="c1">## [1] &quot;spam&quot;  &quot;spam&quot;  &quot;spam&quot;  &quot;bacon&quot; NA      &quot;spam&quot;</span>
</pre></div>
</div>
<p>Thus, a character vector is, in fact,
a sequence of sequences of characters<a class="footnote-reference brackets" href="#footcharsxp" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>.
As usual, the total number of strings can be fetched,
via the <strong class="command">length</strong> function. However, the length of each
string may be read with the vectorised <strong class="command">nchar</strong>.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">length</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">  </span><span class="c1"># how many strings?</span>
<span class="c1">## [1] 6</span>
<span class="nf">nchar</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">   </span><span class="c1"># the number of code points in each string</span>
<span class="c1">## [1]  4  4  4  5 NA  4</span>
</pre></div>
</div>
</section>
<section id="concatenating-character-vectors">
<span id="sec-string-concatenate"></span><h3><span class="section-number">6.1.3. </span>Concatenating character vectors<a class="headerlink" href="#concatenating-character-vectors" title="Permalink to this heading">#</a></h3>
<p><strong class="command">paste</strong> can be used to concatenate  (join) the corresponding
elements of two or more character vectors:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">paste</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="p">))</span><span class="w">  </span><span class="c1"># sep=&quot; &quot; by default</span>
<span class="c1">## [1] &quot;a 1&quot; &quot;b 2&quot; &quot;c 3&quot;</span>
<span class="nf">paste</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1"># see also paste0</span>
<span class="c1">## [1] &quot;a1&quot; &quot;b2&quot; &quot;c3&quot;</span>
</pre></div>
</div>
<p>The function is deeply vectorised:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">paste</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">),</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;!&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;?&quot;</span><span class="p">))</span><span class="w">  </span><span class="c1"># implicit coercion of numbers</span>
<span class="c1">## [1] &quot;a 1 !&quot; &quot;b 2 ?&quot; &quot;c 3 !&quot; &quot;a 4 ?&quot; &quot;b 5 !&quot; &quot;c 6 ?&quot;</span>
</pre></div>
</div>
<p>We can also collapse (flatten, aggregate)
a sequence of strings into a single string:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">paste</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;d&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">collapse</span><span class="o">=</span><span class="s">&quot;,&quot;</span><span class="p">)</span>
<span class="c1">## [1] &quot;a,b,c,d&quot;</span>
<span class="nf">paste</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;d&quot;</span><span class="p">),</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">collapse</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="c1">## [1] &quot;a1b2c1d2&quot;</span>
</pre></div>
</div>
<p>Unfortunately (perhaps for the so-called convenience), <strong class="command">paste</strong>
treats missing values differently from most other vectorised functions:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">paste</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">NA_character_</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;B&quot;</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;!&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="c1">## [1] &quot;A!&quot;  &quot;NA!&quot; &quot;B!&quot;</span>
</pre></div>
</div>
</section>
<section id="formatting-objects">
<h3><span class="section-number">6.1.4. </span>Formatting objects<a class="headerlink" href="#formatting-objects" title="Permalink to this heading">#</a></h3>
<p>Strings can also come into being by turning other R objects
into text. For example, the quite customisable
(see <a class="reference internal" href="220-s3.html#chap-s3"><span class="std std-numref">Chapter 10</span></a>) <strong class="command">format</strong> function
can be used to pretty-print data in dynamically generated reports.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">123456.789</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="kc">pi</span><span class="p">,</span><span class="w"> </span><span class="kc">NaN</span><span class="p">)</span>
<span class="nf">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## [1] &quot;123456.7890&quot; &quot;    -3.1416&quot; &quot;        NaN&quot;</span>
<span class="nf">cat</span><span class="p">(</span><span class="nf">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">digits</span><span class="o">=</span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="n">scientific</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">drop0trailing</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">),</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
<span class="c1">## 123456.789</span>
<span class="c1">##     -3.1415927</span>
<span class="c1">##            NaN</span>
</pre></div>
</div>
<p>Moreover, <strong class="command">sprintf</strong> is a workhorse for turning possibly many atomic
vectors into strings. The numbers‚Äô precision, strings‚Äô widths and
justification, etc., can be fully controlled.
Its first argument is a format string; special escape sequences starting
with the per cent sign, ‚Äú<code class="docutils literal notranslate"><span class="pre">%</span></code>‚Äù, serve as placeholders for the actual values.
For instance, ‚Äú<code class="docutils literal notranslate"><span class="pre">%s</span></code>‚Äù is meant to be replaced with a corresponding string
and ‚Äú<code class="docutils literal notranslate"><span class="pre">%f</span></code>‚Äù with a floating point value.
Additional options are available, e.g., ‚Äú<code class="docutils literal notranslate"><span class="pre">%10.2f</span></code>‚Äù
is a number that, when converted to text, will occupy ten text columns<a class="footnote-reference brackets" href="#footsprintfwidth" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>,
with two decimal digits of precision.
Also, e.g., ‚Äú<code class="docutils literal notranslate"><span class="pre">%1$s</span></code>‚Äù, ‚Äú<code class="docutils literal notranslate"><span class="pre">%2$s</span></code>‚Äù, ‚Ä¶
will insert the 1st, 2nd, ‚Ä¶ argument as text.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">sprintf</span><span class="p">(</span><span class="s">&quot;%.5f&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">pi</span><span class="p">)</span>
<span class="c1">## [1] &quot;3.14159&quot;</span>
<span class="nf">sprintf</span><span class="p">(</span><span class="s">&quot;%s%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;X&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Z&quot;</span><span class="p">))</span><span class="w">  </span><span class="c1"># like paste(...)</span>
<span class="c1">## [1] &quot;aX&quot; &quot;aY&quot; &quot;aZ&quot;</span>
<span class="nf">sprintf</span><span class="p">(</span><span class="s">&quot;key=%s, value=%.1f&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;eggs&quot;</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">100000</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">))</span>
<span class="c1">## [1] &quot;key=spam, value=100000.0&quot; &quot;key=eggs, value=0.0&quot;</span>
<span class="nf">sprintf</span><span class="p">(</span><span class="s">&quot;%.*f&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="kc">pi</span><span class="p">)</span><span class="w">  </span><span class="c1"># variable precision</span>
<span class="c1">## [1] &quot;3.1&quot;     &quot;3.14&quot;    &quot;3.142&quot;   &quot;3.1416&quot;  &quot;3.14159&quot;</span>
<span class="nf">sprintf</span><span class="p">(</span><span class="s">&quot;%1$s, %2$s, %1$s, and %1$s&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bacon&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1"># numbered argument</span>
<span class="c1">## [1] &quot;spam, bacon, spam, and spam&quot;</span>
</pre></div>
</div>
<p>See <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;sprintf&quot;)</span></code> for more details. I recommend. Marek Gagolewski.</p>
</section>
<section id="reading-text-data-from-files">
<h3><span class="section-number">6.1.5. </span>Reading text data from files<a class="headerlink" href="#reading-text-data-from-files" title="Permalink to this heading">#</a></h3>
<p>Given a raw text file, <strong class="command">readLines</strong> can load it into memory
to represent it as a character vector, with each line stored in a separate
string.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">f</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">readLines</span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;https://github.com/gagolews/teaching-data/raw/master/README.md&quot;</span>
<span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">head</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
<span class="c1">## [1] &quot;# Dr [Marek](https://www.gagolewski.com)&#39;s Data for Teaching&quot;</span>
<span class="c1">## [2] &quot;&quot;</span>
<span class="c1">## [3] &quot;&gt; *See the comment lines within the files themselves for&quot;</span>
<span class="c1">## [4] &quot;&gt; a detailed description of each dataset.*&quot;</span>
<span class="c1">## [5] &quot;&quot;</span>
<span class="c1">## [6] &quot;*Good* datasets are actually hard to find!&quot;</span>
</pre></div>
</div>
<p><strong class="command">writeLines</strong> is its counterpart.
There is also an option to read or write parts of files at a time,
which we mention in <a class="reference internal" href="180-flow.html#sec-time-complexity"><span class="std std-numref">Section¬†8.3.5</span></a>.
Also, <strong class="command">cat</strong><code class="code docutils literal notranslate"><span class="pre">(...,</span> <span class="pre">append=TRUE)</span></code> can be used
to create a text file incrementally.</p>
</section>
</section>
<section id="pattern-searching">
<h2><span class="section-number">6.2. </span>Pattern searching<a class="headerlink" href="#pattern-searching" title="Permalink to this heading">#</a></h2>
<section id="comparing-whole-strings">
<h3><span class="section-number">6.2.1. </span>Comparing whole strings<a class="headerlink" href="#comparing-whole-strings" title="Permalink to this heading">#</a></h3>
<p>We have already reviewed a couple of ways to compare
strings as a whole. For instance, the `<strong class="command">==</strong>` operator
implements elementwise testing:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bacon&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;eggs&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;eggs&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1"># recycling rule</span>
<span class="c1">## [1]  TRUE FALSE FALSE  TRUE</span>
</pre></div>
</div>
<p>In <a class="reference internal" href="150-indexing.html#sec-match"><span class="std std-numref">Section¬†5.4.1</span></a>, we introduced
the <strong class="command">match</strong> function and its derivative, the `<strong class="command">%in%</strong>`
operator. They are vectorised in a different way:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">match</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bacon&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;eggs&quot;</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;eggs&quot;</span><span class="p">))</span>
<span class="c1">## [1]  1  1 NA  2</span>
<span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bacon&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;eggs&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;eggs&quot;</span><span class="p">)</span>
<span class="c1">## [1]  TRUE  TRUE FALSE  TRUE</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong class="command">match</strong> relies on simple, bytewise comparisons of the corresponding
code points. It might not be valid in, for example, natural language
processing activities; compare <span id="id6">[<a class="reference internal" href="999-bibliography.html#id65" title="Davis, M., Whistler, K., and Scherer, M. (2021).  Unicode technical standard #10: Unicode collation algorithm. URL: http://www.unicode.org/reports/tr10/.">18</a>]</span>. In particular,
the German word <em>gro√ü</em> is not deemed equal to <em>gross</em>, although we expect
that should be the case, at least in a German language setting.
Moreover, in the rare situations where we read Unicode-unnormalised
data (say, not in the NFC form; see <span id="id7">[<a class="reference internal" href="999-bibliography.html#id66" title="Davis, M. and Whistler, K. (2021).  Unicode standard annex #15: Unicode normalization forms. URL: http://www.unicode.org/reports/tr15/.">17</a>]</span>),
canonically equivalent strings may be considered different.</p>
</div>
</section>
<section id="partial-matching">
<h3><span class="section-number">6.2.2. </span>Partial matching<a class="headerlink" href="#partial-matching" title="Permalink to this heading">#</a></h3>
<p>When only a consideration of the initial part of each string
is required, we can call:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">startsWith</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;s&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spamtastic&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spontaneous&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spoon&quot;</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;spam&quot;</span><span class="p">)</span>
<span class="c1">## [1] FALSE  TRUE  TRUE FALSE FALSE</span>
</pre></div>
</div>
<p>Both the above and <strong class="command">endsWith</strong> are applied elementwisely
in the case of many search prefixes/suffixes, just like in `<strong class="command">==</strong>`.</p>
<p><em>Partial matching</em> of strings can be performed with <strong class="command">charmatch</strong>,
which is a each-vs-all version of <strong class="command">startsWith</strong>:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">charmatch</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;s&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sp&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spams&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;eggs&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bacon&quot;</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;eggs&quot;</span><span class="p">))</span>
<span class="c1">## [1]  1  1  1 NA  2 NA</span>
<span class="nf">charmatch</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;s&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sp&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spoo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spoof&quot;</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spoon&quot;</span><span class="p">))</span>
<span class="c1">## [1]  0  0  1  2 NA</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">0</span></code> designates that there was an ambiguity in matching
a string to a given table.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>(*)
In <a class="reference internal" href="210-design.html#sec-metaprogramming-intro"><span class="std std-numref">Section¬†9.5.7</span></a>, we discuss the very-advanced
<strong class="command">match.arg</strong>, which is frequently called by other R functions.
It assists in selecting a value from a range of possible choices.
Furthermore, <a class="reference internal" href="210-design.html#sec-dollar"><span class="std std-numref">Section¬†9.4.2</span></a> and <a class="reference internal" href="320-language.html#sec-sys-call"><span class="std std-numref">Section¬†15.4.4</span></a>
mention the (discouraged) partial matching of list labels and
function argument names.</p>
</div>
</section>
<section id="matching-anywhere-within-a-string">
<h3><span class="section-number">6.2.3. </span>Matching anywhere within a string<a class="headerlink" href="#matching-anywhere-within-a-string" title="Permalink to this heading">#</a></h3>
<p>Fixed patterns can also be searched for anywhere within character
strings using <strong class="command">grepl</strong>:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;y spammite spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;yummy SPAM&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sram&quot;</span><span class="p">)</span>
<span class="nf">grepl</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">fixed</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w">  </span><span class="c1"># fixed patterns, as opposed to regexes below</span>
<span class="c1">## [1]  TRUE  TRUE FALSE FALSE</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The order of arguments is like <strong class="command">grepl</strong><code class="code docutils literal notranslate"><span class="pre">(needle,</span> <span class="pre">haystack)</span></code>,
not the other way around. Also, this function is not vectorised with respect
to the first argument.</p>
</div>
<div class="proof proof-type-exercise" id="id14">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.1</span>
        
    </div><div class="proof-content">
<p>Determine how the calls to <strong class="command">grep</strong><code class="code docutils literal notranslate"><span class="pre">(y,</span> <span class="pre">x,</span> <span class="pre">value=FALSE)</span></code>
and <strong class="command">grep</strong><code class="code docutils literal notranslate"><span class="pre">(y,</span> <span class="pre">x,</span> <span class="pre">value=TRUE)</span></code> can be implemented
based on <strong class="command">grepl</strong>
and other operations we are already familiar with.</p>
</div></div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>As a curiosity, <strong class="command">agrepl</strong> performs <em>approximate</em> matching
based on Levenshtein‚Äôs edit distance, which can account for
a small number of ‚Äútypos‚Äù.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">agrepl</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">)</span>
<span class="c1">## [1]  TRUE  TRUE FALSE  TRUE</span>
<span class="nf">agrepl</span><span class="p">(</span><span class="s">&quot;ham&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">ignore.case</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [1] TRUE TRUE TRUE TRUE</span>
</pre></div>
</div>
</div>
</section>
<section id="using-regular-expressions">
<span id="sec-regex"></span><h3><span class="section-number">6.2.4. </span>Using regular expressions (*)<a class="headerlink" href="#using-regular-expressions" title="Permalink to this heading">#</a></h3>
<p>Setting <code class="docutils literal notranslate"><span class="pre">perl=TRUE</span></code> allows for identifying occurrences of patterns specified
by the PCRE2 regular expressions (regexes).</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">grepl</span><span class="p">(</span><span class="s">&quot;^spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w">  </span><span class="c1"># strings that begin with `spam`</span>
<span class="c1">## [1]  TRUE FALSE FALSE FALSE</span>
<span class="nf">grepl</span><span class="p">(</span><span class="s">&quot;(?i)^spam|spam$&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w">  </span><span class="c1"># begin or end; case ignored</span>
<span class="c1">## [1]  TRUE  TRUE  TRUE FALSE</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more details on regular expressions in general, see, e.g.,
<span id="id8">[<a class="reference internal" href="999-bibliography.html#id67" title="Friedl, J.E.F. (2006).  Mastering Regular Expressions. O'Reilly.">24</a>]</span>.
The ultimate reference for PCRE2 pattern syntax is the
<a class="reference external" href="http://www.pcre.org/current/doc/html/pcre2pattern.html"><code class="docutils literal notranslate"><span class="pre">man</span></code></a> page
<em class="manpage">pcre2pattern(3)</em>.
R also gives access to ERE-like TRE library
(see <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;regex&quot;)</span></code>), which is the default one.
However, we discourage its use because it is feature-poorer.</p>
</div>
<div class="proof proof-type-exercise" id="id15">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.2</span>
        
    </div><div class="proof-content">
<p>The <strong class="command">list.files</strong> function generates the list
of file names in a given directory that match a given regular expression.
For instance, the following gives all CSV files in some directory.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">list.files</span><span class="p">(</span><span class="s">&quot;../../Projects/teaching-data/r/&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="s">&quot;(\.csv$)&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1"># or &quot;\\.csv$&quot;</span>
<span class="c1">## [1] &quot;air_quality_1973.csv&quot; &quot;anscombe.csv&quot;         &quot;iris.csv&quot;</span>
<span class="c1">## [4] &quot;titanic.csv&quot;          &quot;tooth_growth.csv&quot;     &quot;trees.csv&quot;</span>
<span class="c1">## [7] &quot;world_phones.csv&quot;</span>
</pre></div>
</div>
<p>Write a single regular expression that matches file names
ending with ‚Äú<code class="docutils literal notranslate"><span class="pre">.csv</span></code>‚Äù or ‚Äú<code class="docutils literal notranslate"><span class="pre">.csv.gz</span></code>‚Äù.
Also, scribble a regex that matches CSV files whose names do not begin
with ‚Äú<code class="docutils literal notranslate"><span class="pre">eurusd</span></code>‚Äù.</p>
</div></div></section>
<section id="locating-pattern-occurrences">
<h3><span class="section-number">6.2.5. </span>Locating pattern occurrences<a class="headerlink" href="#locating-pattern-occurrences" title="Permalink to this heading">#</a></h3>
<p><strong class="command">regexpr</strong> finds the first occurrence of a pattern in each string:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">regexpr</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">fixed</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [1]  1  3 -1 -1</span>
<span class="c1">## attr(,&quot;match.length&quot;)</span>
<span class="c1">## [1]  4  4 -1 -1</span>
<span class="c1">## attr(,&quot;index.type&quot;)</span>
<span class="c1">## [1] &quot;chars&quot;</span>
<span class="c1">## attr(,&quot;useBytes&quot;)</span>
<span class="c1">## [1] TRUE</span>
</pre></div>
</div>
<p>In particular, there is a pattern occurrence starting at the
3th code point of the 2nd string in <code class="docutils literal notranslate"><span class="pre">x</span></code>.
Moreover, the last string has no pattern match (denoted with <code class="docutils literal notranslate"><span class="pre">-1</span></code>).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">match.length</span></code> attribute is generally more informative when
searching with regular expressions.</p>
<p>To locate all the matches, i.e., globally,
we use <strong class="command">gregexpr</strong>:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># `spam` followed by 0 or more letters, case insensitively</span>
<span class="nf">gregexpr</span><span class="p">(</span><span class="s">&quot;(?i)spam\\p{L}*&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [[1]]</span>
<span class="c1">## [1] 1</span>
<span class="c1">## attr(,&quot;match.length&quot;)</span>
<span class="c1">## [1] 4</span>
<span class="c1">## attr(,&quot;index.type&quot;)</span>
<span class="c1">## [1] &quot;chars&quot;</span>
<span class="c1">## attr(,&quot;useBytes&quot;)</span>
<span class="c1">## [1] TRUE</span>
<span class="c1">##</span>
<span class="c1">## [[2]]</span>
<span class="c1">## [1]  3 12</span>
<span class="c1">## attr(,&quot;match.length&quot;)</span>
<span class="c1">## [1] 8 4</span>
<span class="c1">## attr(,&quot;index.type&quot;)</span>
<span class="c1">## [1] &quot;chars&quot;</span>
<span class="c1">## attr(,&quot;useBytes&quot;)</span>
<span class="c1">## [1] TRUE</span>
<span class="c1">##</span>
<span class="c1">## [[3]]</span>
<span class="c1">## [1] 7</span>
<span class="c1">## attr(,&quot;match.length&quot;)</span>
<span class="c1">## [1] 4</span>
<span class="c1">## attr(,&quot;index.type&quot;)</span>
<span class="c1">## [1] &quot;chars&quot;</span>
<span class="c1">## attr(,&quot;useBytes&quot;)</span>
<span class="c1">## [1] TRUE</span>
<span class="c1">##</span>
<span class="c1">## [[4]]</span>
<span class="c1">## [1] -1</span>
<span class="c1">## attr(,&quot;match.length&quot;)</span>
<span class="c1">## [1] -1</span>
<span class="c1">## attr(,&quot;index.type&quot;)</span>
<span class="c1">## [1] &quot;chars&quot;</span>
<span class="c1">## attr(,&quot;useBytes&quot;)</span>
<span class="c1">## [1] TRUE</span>
</pre></div>
</div>
<p>As we noted in <a class="reference internal" href="140-list.html#sec-list-use-cases"><span class="std std-numref">Section¬†4.4.2</span></a>,
wrapping the results in a list was a clever choice, as the number
of matches can obviously vary between strings.</p>
<p>In <a class="reference internal" href="170-function.html#sec-fun-prog"><span class="std std-numref">Section¬†7.2</span></a>, we will look at the
<strong class="command">Map</strong> function, which, along with <strong class="command">substring</strong> introduced
below, can aid in getting the most out of such data.
Meanwhile, let us just mention that <strong class="command">regmatches</strong>
extracts the matching substrings:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">regmatches</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="nf">gregexpr</span><span class="p">(</span><span class="s">&quot;(?i)spam\\p{L}*&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span>
<span class="c1">## [[1]]</span>
<span class="c1">## [1] &quot;spam&quot;</span>
<span class="c1">##</span>
<span class="c1">## [[2]]</span>
<span class="c1">## [1] &quot;spammite&quot; &quot;spam&quot;</span>
<span class="c1">##</span>
<span class="c1">## [[3]]</span>
<span class="c1">## [1] &quot;SPAM&quot;</span>
<span class="c1">##</span>
<span class="c1">## [[4]]</span>
<span class="c1">## character(0)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>(*) Let us consider what happens when a regular expression contains
parenthesised subexpressions (capture groups).</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">r</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;(?&lt;basename&gt;[^. ]+)\\.(?&lt;extension&gt;[^ ]*)&quot;</span>
</pre></div>
</div>
<p>The above regex consists of two such parts.
The first one is labelled ‚Äú<code class="docutils literal notranslate"><span class="pre">basename</span></code>‚Äù. It comprises several
arbitrary characters except for the space and the dot.
The second group, named ‚Äú<code class="docutils literal notranslate"><span class="pre">extension</span></code>‚Äù, is a substring consisting
of anything but the space. A dot separates these two groups.</p>
<p>Such a pattern can be used for unpacking space-delimited lists of
file names.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;dataset.csv.gz something_else.txt spam&quot;</span>
<span class="nf">regexpr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">,</span><span class="w"> </span><span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [1] 1</span>
<span class="c1">## attr(,&quot;match.length&quot;)</span>
<span class="c1">## [1] 14</span>
<span class="c1">## attr(,&quot;index.type&quot;)</span>
<span class="c1">## [1] &quot;chars&quot;</span>
<span class="c1">## attr(,&quot;useBytes&quot;)</span>
<span class="c1">## [1] TRUE</span>
<span class="c1">## attr(,&quot;capture.start&quot;)</span>
<span class="c1">##      basename extension</span>
<span class="c1">## [1,]        1         9</span>
<span class="c1">## attr(,&quot;capture.length&quot;)</span>
<span class="c1">##      basename extension</span>
<span class="c1">## [1,]        7         6</span>
<span class="c1">## attr(,&quot;capture.names&quot;)</span>
<span class="c1">## [1] &quot;basename&quot;  &quot;extension&quot;</span>
<span class="nf">gregexpr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">,</span><span class="w"> </span><span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [[1]]</span>
<span class="c1">## [1]  1 16</span>
<span class="c1">## attr(,&quot;match.length&quot;)</span>
<span class="c1">## [1] 14 18</span>
<span class="c1">## attr(,&quot;index.type&quot;)</span>
<span class="c1">## [1] &quot;chars&quot;</span>
<span class="c1">## attr(,&quot;useBytes&quot;)</span>
<span class="c1">## [1] TRUE</span>
<span class="c1">## attr(,&quot;capture.start&quot;)</span>
<span class="c1">##      basename extension</span>
<span class="c1">## [1,]        1         9</span>
<span class="c1">## [2,]       16        31</span>
<span class="c1">## attr(,&quot;capture.length&quot;)</span>
<span class="c1">##      basename extension</span>
<span class="c1">## [1,]        7         6</span>
<span class="c1">## [2,]       14         3</span>
<span class="c1">## attr(,&quot;capture.names&quot;)</span>
<span class="c1">## [1] &quot;basename&quot;  &quot;extension&quot;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">capture.*</span></code> attributes give us access to the matches to the individual
capture groups, i.e., the <code class="docutils literal notranslate"><span class="pre">basename</span></code> and the <code class="docutils literal notranslate"><span class="pre">extension</span></code>.</p>
</div>
<div class="proof proof-type-exercise" id="id16">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.3</span>
        
    </div><div class="proof-content">
<p>(*) Check out the difference between the results generated by
<strong class="command">regexec</strong> and <strong class="command">regexpr</strong> as well as
<strong class="command">gregexec</strong> and <strong class="command">gregexpr</strong>.</p>
</div></div></section>
<section id="replacing-pattern-occurrences">
<h3><span class="section-number">6.2.6. </span>Replacing pattern occurrences<a class="headerlink" href="#replacing-pattern-occurrences" title="Permalink to this heading">#</a></h3>
<p><strong class="command">sub</strong> and <strong class="command">gsub</strong> can replace first and all, respectively,
matches to a pattern:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;y spammite spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;yummy SPAM&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sram&quot;</span><span class="p">)</span>
<span class="nf">sub</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ham&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">fixed</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [1] &quot;ham&quot;            &quot;y hammite spam&quot; &quot;yummy SPAM&quot;     &quot;sram&quot;</span>
<span class="nf">gsub</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ham&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">fixed</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [1] &quot;ham&quot;           &quot;y hammite ham&quot; &quot;yummy SPAM&quot;    &quot;sram&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>(*)
If a regex features some capture groups, matches thereto
can be mentioned not only in the pattern itself
but also in the replacement string:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">gsub</span><span class="p">(</span><span class="s">&quot;(\\p{L})\\p{L}\\1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;\\1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;aha egg gag NaN spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [1] &quot;a egg g N spam&quot;</span>
</pre></div>
</div>
<p>The above matches in the following order:
a letter (it is a capture group),
another letter, and the former letter again. Each
such palindrome of length three is replaced with just the repeated
letter.</p>
</div>
<div class="proof proof-type-exercise" id="id17">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.4</span>
        
    </div><div class="proof-content">
<p>(*) Display the source code of <strong class="command">glob2rx</strong> by calling
<strong class="command">print</strong><code class="code docutils literal notranslate"><span class="pre">(glob2rx)</span></code>
and study how this function converts wildcards such as <code class="regexp docutils literal notranslate"><span class="pre">file???.*</span></code>
or <code class="regexp docutils literal notranslate"><span class="pre">*.csv</span></code> to regular expressions that can be passed to, e.g.,
<strong class="command">list.files</strong>.</p>
</div></div></section>
<section id="splitting-strings-into-tokens">
<h3><span class="section-number">6.2.7. </span>Splitting strings into tokens<a class="headerlink" href="#splitting-strings-into-tokens" title="Permalink to this heading">#</a></h3>
<p><strong class="command">strsplit</strong> divides each string in a character vector into chunks.
This time, though, the search pattern specifying the token delimiter
is given as the second argument:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">strsplit</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;spam;spam;eggs;;bacon&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spam&quot;</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">fixed</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="c1">## [[1]]</span>
<span class="c1">## [1] &quot;spam&quot;  &quot;spam&quot;  &quot;eggs&quot;  &quot;&quot;      &quot;bacon&quot;</span>
<span class="c1">##</span>
<span class="c1">## [[2]]</span>
<span class="c1">## [1] &quot;spam&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="other-string-operations">
<h2><span class="section-number">6.3. </span>Other string operations<a class="headerlink" href="#other-string-operations" title="Permalink to this heading">#</a></h2>
<section id="extracting-substrings">
<h3><span class="section-number">6.3.1. </span>Extracting substrings<a class="headerlink" href="#extracting-substrings" title="Permalink to this heading">#</a></h3>
<p><strong class="command">substring</strong> extracts parts of strings between given character
position ranges.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">substring</span><span class="p">(</span><span class="s">&quot;spammity spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="w">  </span><span class="c1"># from 1st to 4th character</span>
<span class="c1">## [1] &quot;spam&quot;</span>
<span class="nf">substring</span><span class="p">(</span><span class="s">&quot;spammity spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">  </span><span class="c1"># from 10th to end</span>
<span class="c1">## [1] &quot;spam&quot;</span>
<span class="nf">substring</span><span class="p">(</span><span class="s">&quot;spammity spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">14</span><span class="p">))</span><span class="w">  </span><span class="c1"># vectorisation</span>
<span class="c1">## [1] &quot;spam&quot; &quot;spam&quot;</span>
<span class="nf">substring</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;spammity spam&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bacon and eggs&quot;</span><span class="p">),</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">))</span>
<span class="c1">## [1] &quot;spam&quot;  &quot;bacon&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is also a replacement (compare <a class="reference internal" href="210-design.html#sec-replacementfun"><span class="std std-numref">Section¬†9.4.6</span></a>)
version of the above:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;spam, spam, bacon, and spam&quot;</span>
<span class="nf">substring</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">7</span><span class="p">,</span><span class="w"> </span><span class="m">11</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;eggs&quot;</span>
<span class="nf">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## [1] &quot;spam, eggs, bacon, and spam&quot;</span>
</pre></div>
</div>
<p>Unfortunately, the number of characters in the replacement string
should not exceed the length of the part being substituted
(try ‚Äú<code class="docutils literal notranslate"><span class="pre">chickpeas</span></code>‚Äù instead of ‚Äú<code class="docutils literal notranslate"><span class="pre">eggs</span></code>‚Äù).
However, substring replacement can be written as
a composition of substring extraction and concatenation:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">paste</span><span class="p">(</span><span class="nf">substring</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;chickpeas&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">substring</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">11</span><span class="p">),</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="c1">## [1] &quot;spam, chickpeas, bacon, and spam&quot;</span>
</pre></div>
</div>
</div>
<div class="proof proof-type-exercise" id="id18">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.5</span>
        
    </div><div class="proof-content">
<p>Take the output generated by <strong class="command">regexpr</strong> and apply <strong class="command">substring</strong>
to extract the pattern occurrences. If there is no match in some string,
the corresponding output should be <code class="docutils literal notranslate"><span class="pre">NA</span></code>.</p>
</div></div></section>
<section id="translating-characters">
<h3><span class="section-number">6.3.2. </span>Translating characters<a class="headerlink" href="#translating-characters" title="Permalink to this heading">#</a></h3>
<p><strong class="command">tolower</strong> and <strong class="command">toupper</strong> can be used to convert between
lower and upper case:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">toupper</span><span class="p">(</span><span class="s">&quot;spam&quot;</span><span class="p">)</span>
<span class="c1">## [1] &quot;SPAM&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Like many other string operations in base R, these functions
perform very simple character substitutions. They might not be valid
in natural language processing tasks. For instance, <em>gro√ü</em> is <strong>not</strong>
converted to <em>GROSS</em>, the correct case folding in German.</p>
</div>
<p>Moreover, <strong class="command">chartr</strong> translates individual characters:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">chartr</span><span class="p">(</span><span class="s">&quot;\\&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c:\\windows\\system\\cmd.exe&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1"># chartr(old, new, x)</span>
<span class="c1">## [1] &quot;c:/windows/system/cmd.exe&quot;</span>
<span class="nf">chartr</span><span class="p">(</span><span class="s">&quot;([S&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;)]*&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;:( :S :[&quot;</span><span class="p">)</span>
<span class="c1">## [1] &quot;:) :* :]&quot;</span>
</pre></div>
</div>
<p>In the first line, we replace each backslash with a slash.
The second example replaces ‚Äú<code class="docutils literal notranslate"><span class="pre">(</span></code>‚Äù, ‚Äú<code class="docutils literal notranslate"><span class="pre">[</span></code>‚Äù, and ‚Äú<code class="docutils literal notranslate"><span class="pre">S</span></code>‚Äù with
‚Äú<code class="docutils literal notranslate"><span class="pre">)</span></code>‚Äù, ‚Äú<code class="docutils literal notranslate"><span class="pre">]</span></code>‚Äù, and ‚Äú<code class="docutils literal notranslate"><span class="pre">*</span></code>‚Äù, respectively.</p>
</section>
<section id="ordering-strings">
<h3><span class="section-number">6.3.3. </span>Ordering strings<a class="headerlink" href="#ordering-strings" title="Permalink to this heading">#</a></h3>
<p>We have previously mentioned that operators and functions such
as `<strong class="command">&lt;</strong>`, `<strong class="command">&gt;=</strong>`,
<strong class="command">sort</strong>, <strong class="command">order</strong>,
<strong class="command">rank</strong>, and <strong class="command">xtfrm</strong><a class="footnote-reference brackets" href="#footxtfrm" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>
are based on the lexicographic ordering of strings.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">sort</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;ch≈Çodny&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hardy&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;chladn√Ω&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hladn√Ω&quot;</span><span class="p">))</span>
<span class="c1">## [1] &quot;chladn√Ω&quot; &quot;ch≈Çodny&quot; &quot;hardy&quot;   &quot;hladn√Ω&quot;</span>
</pre></div>
</div>
<p>It is worth noting that the ordering depends on the currently
selected locale; see <strong class="command">Sys.getlocale</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;LC_COLLATE&quot;)</span></code>.
For instance, in the Slovak language setting, we would obtain
<code class="docutils literal notranslate"><span class="pre">&quot;hardy&quot;</span></code> &lt; <code class="docutils literal notranslate"><span class="pre">&quot;hladn√Ω&quot;</span></code> &lt; <code class="docutils literal notranslate"><span class="pre">&quot;chladn√Ω&quot;</span></code> &lt; <code class="docutils literal notranslate"><span class="pre">&quot;ch≈Çodny&quot;</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Many ‚Äústructured‚Äù data items can be displayed or transmitted
as human-readable strings. In particular, we know that
<strong class="command">as.numeric</strong> can convert a string to a number.
Moreover, <a class="reference internal" href="220-s3.html#sec-datetime"><span class="std std-numref">Section¬†10.3.1</span></a> will discuss
date-time objects such as <code class="docutils literal notranslate"><span class="pre">&quot;1970-01-01</span> <span class="pre">00:00:00</span> <span class="pre">GMT&quot;</span></code>.
We will be processing them with specialised functions such as
<strong class="command">strptime</strong> and <strong class="command">strftime</strong>.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>(*)
Many string operations in base R are not necessarily
portable. The <strong class="program">stringx</strong> package defines drop-in,
‚Äúfixed‚Äù replacements therefor. They are based on the International Components
for Unicode (<a class="reference external" href="https://icu.unicode.org/">ICU</a>) library, a de facto standard
for processing Unicode text,
and the R package <strong class="program">stringi</strong>; see <span id="id10">[<a class="reference internal" href="999-bibliography.html#id6" title="Gagolewski, M. (2022).  stringi: Fast and portable character string processing in R. Journal of Statistical Software, 103(2):1‚Äì59. URL: https://stringi.gagolewski.com, DOI: 10.18637/jss.v103.i02.">27</a>]</span>.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># call install.packages(&quot;stringx&quot;) first</span>
<span class="nf">suppressPackageStartupMessages</span><span class="p">(</span><span class="nf">library</span><span class="p">(</span><span class="s">&quot;stringx&quot;</span><span class="p">))</span><span class="w">  </span><span class="c1"># load the package</span>
<span class="nf">sort</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;ch≈Çodny&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hardy&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;chladn√Ω&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hladn√Ω&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">locale</span><span class="o">=</span><span class="s">&quot;sk_SK&quot;</span><span class="p">)</span>
<span class="c1">## [1] &quot;hardy&quot;   &quot;hladn√Ω&quot;  &quot;chladn√Ω&quot; &quot;ch≈Çodny&quot;</span>
<span class="nf">toupper</span><span class="p">(</span><span class="s">&quot;gro\u00DF&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1"># compare base::toupper(&quot;gro\u00DF&quot;)</span>
<span class="c1">## [1] &quot;GROSS&quot;</span>
<span class="nf">detach</span><span class="p">(</span><span class="s">&quot;package:stringx&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1"># unload the package</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="other-atomic-vector-types">
<h2><span class="section-number">6.4. </span>Other atomic vector types (*)<a class="headerlink" href="#other-atomic-vector-types" title="Permalink to this heading">#</a></h2>
<p>We have discussed four vector types: <code class="docutils literal notranslate"><span class="pre">logical</span></code>, <code class="docutils literal notranslate"><span class="pre">double</span></code>, <code class="docutils literal notranslate"><span class="pre">character</span></code>,
and <code class="docutils literal notranslate"><span class="pre">list</span></code> (the latter being a generic-recursive vector).
To get the complete picture of the sequence-like types in R,
let us briefly mention <code class="docutils literal notranslate"><span class="pre">integer</span></code>, <code class="docutils literal notranslate"><span class="pre">complex</span></code>, and <code class="docutils literal notranslate"><span class="pre">raw</span></code> atomic types
so that we are not surprised when we encounter them.</p>
<section id="integer-vectors">
<span id="sec-integer"></span><h3><span class="section-number">6.4.1. </span>Integer vectors (*)<a class="headerlink" href="#integer-vectors" title="Permalink to this heading">#</a></h3>
<p>Integer scalars can be input manually by using the
<code class="docutils literal notranslate"><span class="pre">L</span></code> suffix:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">2L</span><span class="p">,</span><span class="w"> </span><span class="m">-1L</span><span class="p">,</span><span class="w"> </span><span class="kc">NA_integer_</span><span class="p">))</span><span class="w">  </span><span class="c1"># looks like numeric</span>
<span class="c1">## [1]  1  2 -1 NA</span>
<span class="nf">typeof</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">  </span><span class="c1"># but is integer</span>
<span class="c1">## [1] &quot;integer&quot;</span>
</pre></div>
</div>
<p>Some functions return them in a few contexts<a class="footnote-reference brackets" href="#footaltrepint" id="id11" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a>:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">typeof</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">)</span><span class="w">  </span><span class="c1"># seq(1, 10) as well, but not seq(1, 10, 1)</span>
<span class="c1">## [1] &quot;integer&quot;</span>
<span class="nf">as.integer</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">-1.1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1.9</span><span class="p">,</span><span class="w"> </span><span class="m">2.1</span><span class="p">))</span><span class="w">  </span><span class="c1"># truncate/round towards 0</span>
<span class="c1">## [1] -1  0  1  2</span>
</pre></div>
</div>
<p>In most expressions, integer vectors behave like numeric ones.
They are silently coerced to <code class="docutils literal notranslate"><span class="pre">double</span></code> if need be.
Therefore, there is no real practical reason to distinguish between them
(they are of <em>internal</em> interest, e.g.,
when writing C/C++ extensions; see <a class="reference internal" href="310-compiled.html#chap-compiled"><span class="std std-numref">Chapter 14</span></a>).
For example:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="m">1L</span><span class="o">/</span><span class="m">2L</span><span class="w">  </span><span class="c1"># like 1/2 == 1.0/2.0</span>
<span class="c1">## [1] 0.5</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>(*)
R <code class="docutils literal notranslate"><span class="pre">integer</span></code>s are 32-bit signed types.
The <code class="docutils literal notranslate"><span class="pre">double</span></code> type can store more integers than them
(with the maximal contiguously representable integer
being <span class="math">\(2^{53}\)</span> vs <span class="math">\(2^{31}-1\)</span> in the former case; see <a class="reference internal" href="130-logical.html#sec-fp"><span class="std std-numref">Section¬†3.2.3</span></a>):</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">as.integer</span><span class="p">(</span><span class="m">2</span><span class="o">^</span><span class="m">31-1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1L</span><span class="w">  </span><span class="c1"># 32-bit integer overflow</span>
<span class="c1">## Warning in as.integer(2^31 - 1) + 1L: NAs produced by integer overflow</span>
<span class="c1">## [1] NA</span>
<span class="nf">as.integer</span><span class="p">(</span><span class="m">2</span><span class="o">^</span><span class="m">31-1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2</span><span class="o">^</span><span class="m">31</span><span class="w"> </span><span class="c1"># integer+double == double ‚Äì OK</span>
<span class="c1">## [1] TRUE</span>
<span class="p">(</span><span class="m">2</span><span class="o">^</span><span class="m">53</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2</span><span class="o">^</span><span class="m">53</span><span class="w">  </span><span class="c1"># OK</span>
<span class="c1">## [1] TRUE</span>
<span class="p">(</span><span class="m">2</span><span class="o">^</span><span class="m">53</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2</span><span class="o">^</span><span class="m">53</span><span class="w">  </span><span class="c1"># lost due to FP rounding, left result is 2^53 - 1</span>
<span class="c1">## [1] FALSE</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since R 3.0, there is support for vectors longer
than <span class="math">\(2^{31}-1\)</span> elements. As there are no 64-bit integers
in R, these are indexed by doubles anyway (as we have been doing
all this time).
Interestingly, <code class="docutils literal notranslate"><span class="pre">x[1.9]</span></code> is the same as <code class="docutils literal notranslate"><span class="pre">x[1]</span></code>,
and <code class="docutils literal notranslate"><span class="pre">x[-1.9]</span></code> means <code class="docutils literal notranslate"><span class="pre">x[-1]</span></code> (a truncation of the fractional part).
This is why the notation like <code class="docutils literal notranslate"><span class="pre">x[</span></code><strong class="command">length</strong><code class="code docutils literal notranslate"><span class="pre">(x)*0.2]</span></code>
works regardless of whether the length of <code class="docutils literal notranslate"><span class="pre">x</span></code> is a multiple of 5
or not, which is neat.</p>
</div>
</section>
<section id="raw-vectors">
<span id="sec-raw"></span><h3><span class="section-number">6.4.2. </span>Raw vectors (*)<a class="headerlink" href="#raw-vectors" title="Permalink to this heading">#</a></h3>
<p>Vectors of the type <code class="docutils literal notranslate"><span class="pre">raw</span></code> can store bytes, i.e., unsigned
8-bit integers, whose range is 0‚Äì255
(there are no raw <code class="docutils literal notranslate"><span class="pre">NA</span></code>s).
For example:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">as.raw</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">-1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="mh">0xc0</span><span class="p">,</span><span class="w"> </span><span class="m">254</span><span class="p">,</span><span class="w"> </span><span class="m">255</span><span class="p">,</span><span class="w"> </span><span class="m">256</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">))</span>
<span class="c1">## Warning: out-of-range values treated as 0 in coercion to raw</span>
<span class="c1">## [1] 00 00 01 02 c0 fe ff 00 00</span>
</pre></div>
</div>
<p>They are displayed as two-digit hexadecimal (base-16) numbers.
We may enter such numbers using the ‚Äú<code class="docutils literal notranslate"><span class="pre">0x</span></code>‚Äù prefix.</p>
<p>Only a few functions deal with such vectors:
e.g., <strong class="command">readBin</strong>, <strong class="command">charToRaw</strong>,
and <strong class="command">rawToChar</strong>.</p>
</section>
<section id="complex-vectors">
<span id="sec-complex"></span><h3><span class="section-number">6.4.3. </span>Complex vectors (*)<a class="headerlink" href="#complex-vectors" title="Permalink to this heading">#</a></h3>
<p>We can also play with vectors of the type <code class="docutils literal notranslate"><span class="pre">complex</span></code>,
with ‚Äú<code class="docutils literal notranslate"><span class="pre">1i</span></code>‚Äù representing the imaginary unit, <span class="math">\(\sqrt{-1}\)</span>.
Complex numbers appear in quite a few engineering or scientific
applications, e.g., in physics, electronics, or signal processing.
They are (at least: ought to be) part of introductory
subjects or textbooks in university-level mathematics,
including the statistics/machine learning-oriented ones
because of their heavy use of numerical computing; see e.g.,
<span id="id12">[<a class="reference internal" href="999-bibliography.html#id28" title="Deisenroth, M.P., Faisal, A.A., and Ong, C.S. (2020).  Mathematics for Machine Learning. Cambridge University Press. URL: https://mml-book.com/.">19</a>, <a class="reference internal" href="999-bibliography.html#id42" title="Gentle, J.E. (2007).  Matrix Algebra. Springer.">30</a>]</span>.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1i</span><span class="p">,</span><span class="w"> </span><span class="kc">pi</span><span class="o">+</span><span class="kc">pi</span><span class="o">*</span><span class="m">1i</span><span class="p">,</span><span class="w"> </span><span class="kc">NA_complex_</span><span class="p">)</span>
<span class="c1">## [1] 0.0000+0.0000i 0.0000+1.0000i 3.1416+3.1416i             NA</span>
</pre></div>
</div>
<p>Apart from the basic operators, mathematical and aggregation functions,
procedures like <strong class="command">fft</strong>, <strong class="command">solve</strong>, <strong class="command">qr</strong>,
or <strong class="command">svd</strong> can be fed with or produce such data. For more details,
see <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;complex&quot;)</span></code> and some matrix examples in <a class="reference internal" href="230-matrix.html#chap-matrix"><span class="std std-numref">Chapter 11</span></a>.</p>
</section>
</section>
<section id="exercises">
<h2><span class="section-number">6.5. </span>Exercises<a class="headerlink" href="#exercises" title="Permalink to this heading">#</a></h2>
<p>Exercises marked with (*) might require tinkering with regular expressions
or third-party R packages.</p>
<div class="proof proof-type-exercise" id="id19">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.6</span>
        
    </div><div class="proof-content">
<p>Answer the following questions:</p>
<ul class="simple">
<li><p>How many characters are there in the string <code class="docutils literal notranslate"><span class="pre">&quot;ab\n\\\t\\\\\&quot;&quot;</span></code>?
What about <code class="docutils literal notranslate"><span class="pre">&quot;-{ab\n\\\t\\\\\&quot;-)}-&quot;</span></code>?</p></li>
<li><p>What is the result of calling
‚Äú<strong class="command">paste</strong><code class="code docutils literal notranslate"><span class="pre">(NA,</span> <span class="pre">1:5,</span> <span class="pre">collapse=&quot;&quot;)</span></code>‚Äù?</p></li>
<li><p>What is the meaning of the following <strong class="command">sprintf</strong> format strings:
<code class="docutils literal notranslate"><span class="pre">&quot;%s&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;%20s&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;%-20s&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;%f&quot;</span></code>,  <code class="docutils literal notranslate"><span class="pre">&quot;%g&quot;</span></code>,  <code class="docutils literal notranslate"><span class="pre">&quot;%e&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;%5f&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;%5.2f%%&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;%.2f&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;%0+5f&quot;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&quot;[%+-5.2f]&quot;</span></code>?</p></li>
<li><p>What is the difference between <strong class="command">regexpr</strong> and <strong class="command">gregexpr</strong>?
What does ‚Äúg‚Äù in the latter name stand for?</p></li>
<li><p>What is the result of a call to
‚Äú<strong class="command">grepl</strong><code class="code docutils literal notranslate"><span class="pre">(</span></code><strong class="command">c</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;spam&quot;,</span> <span class="pre">&quot;spammity</span> <span class="pre">spam&quot;,</span> <span class="pre">&quot;aubergines&quot;),</span> <span class="pre">&quot;spam&quot;)</span></code>‚Äù?</p></li>
<li><p>Is it always the case that ‚Äú<code class="docutils literal notranslate"><span class="pre">&quot;Aaron&quot;</span> <span class="pre">&lt;</span> <span class="pre">&quot;Zorro&quot;</span></code>‚Äù?</p></li>
<li><p>Why ‚Äú<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">&quot;10&quot;</span></code>‚Äù and ‚Äú<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">10</span></code>‚Äù may return different results?</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">x</span></code> is a character vector, is ‚Äú<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">==</span> <span class="pre">x</span></code>‚Äù always equal to <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>?</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> are character vectors of lengths <span class="math">\(n\)</span> and <span class="math">\(m\)</span>, respectively,
what is the length of the output of ‚Äú<strong class="command">match</strong><code class="code docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y)</span></code>‚Äù?</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">x</span></code> is a named vector, why is there a difference between
‚Äú<code class="docutils literal notranslate"><span class="pre">x[NA]</span></code>‚Äù and ‚Äú<code class="docutils literal notranslate"><span class="pre">x[NA_character_]</span></code>‚Äù?</p></li>
<li><p>What is the difference between ‚Äú<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">==</span> <span class="pre">y</span></code>‚Äù and ‚Äú<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">%in%</span> <span class="pre">y</span></code>‚Äù?</p></li>
</ul>
</div></div><div class="proof proof-type-exercise" id="id20">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.7</span>
        
    </div><div class="proof-content">
<p>Let <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, and <code class="docutils literal notranslate"><span class="pre">z</span></code> be atomic vectors and <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> be single strings.
Generate the same results as
‚Äú<strong class="command">pastena</strong><code class="code docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">collapse=b)</span></code>‚Äù,
‚Äú<strong class="command">pastena</strong><code class="code docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">sep=a)</span></code>‚Äù,
‚Äú<strong class="command">pastena</strong><code class="code docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">sep=a,</span> <span class="pre">collapse=b)</span></code>‚Äù,
‚Äú<strong class="command">pastena</strong><code class="code docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">z,</span> <span class="pre">sep=a)</span></code>‚Äù,
‚Äú<strong class="command">pastena</strong><code class="code docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">z,</span> <span class="pre">sep=a,</span> <span class="pre">collapse=b)</span></code>‚Äù,
assuming that <strong class="command">pastena</strong> is a version of <strong class="command">paste</strong>
(which we do not have) that handles missing data in a way consistent
with most other functions.</p>
</div></div><div class="proof proof-type-exercise" id="id21">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.8</span>
        
    </div><div class="proof-content">
<p>Based on <strong class="command">list.files</strong> and <strong class="command">glob2rx</strong>,
generate the list of all PDFs on your computer.
Then, using <strong class="command">file.size</strong> filter out the files smaller
than 10 MiB.</p>
</div></div><div class="proof proof-type-exercise" id="id22">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.9</span>
        
    </div><div class="proof-content">
<p>Read a text file that stores a long paragraph of some banal prose.
Concatenate all the lines to form a single, long string.
Using <strong class="command">strwrap</strong> and <strong class="command">cat</strong>,
output the paragraph on the console,
nicely formatted to fit an aesthetic width, say, 60 text columns.</p>
</div></div><div class="proof proof-type-exercise" id="id23">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.10</span>
        
    </div><div class="proof-content">
<p>(*) Implement your own simplified version of <strong class="command">basename</strong> and <strong class="command">dirname</strong>.</p>
</div></div><div class="proof proof-type-exercise" id="id24">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.11</span>
        
    </div><div class="proof-content">
<p>(*) Implement an operation similar to <strong class="command">trimws</strong> using the functions
introduced in this chapter.</p>
</div></div><div class="proof proof-type-exercise" id="id25">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.12</span>
        
    </div><div class="proof-content">
<p>(*) Write a regex that extracts all <em>words</em> from each string in a
given character vector.</p>
</div></div><div class="proof proof-type-exercise" id="id26">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.13</span>
        
    </div><div class="proof-content">
<p>(*) Write a regex that extracts, from each string
in a character vector, all:</p>
<ul class="simple">
<li><p>integers numbers (signed or unsigned),</p></li>
<li><p>floating-point numbers,</p></li>
<li><p>numbers of any kind (including those in scientific notation),</p></li>
<li><p>#hashtags,</p></li>
<li><p>email&#64;address.es,</p></li>
<li><p>hyperlinks of the form http://‚Ä¶ and https://‚Ä¶.</p></li>
</ul>
</div></div><div class="proof proof-type-exercise" id="id27">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.14</span>
        
    </div><div class="proof-content">
<p>(*) What do <code class="docutils literal notranslate"><span class="pre">42i</span></code>, <code class="docutils literal notranslate"><span class="pre">42L</span></code>, and <code class="docutils literal notranslate"><span class="pre">0x42</span></code> stand for?</p>
</div></div><div class="proof proof-type-exercise" id="id28">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.15</span>
        
    </div><div class="proof-content">
<p>(*) Check out <strong class="command">stri_sort</strong> in the <strong class="program">stringi</strong> package
(or <strong class="command">sort.character</strong> in <strong class="program">stringx</strong>) for a way
to obtain an ordering like <code class="docutils literal notranslate"><span class="pre">&quot;a1&quot;</span></code> &lt; <code class="docutils literal notranslate"><span class="pre">&quot;a2&quot;</span></code> &lt; <code class="docutils literal notranslate"><span class="pre">&quot;a10&quot;</span></code> &lt; <code class="docutils literal notranslate"><span class="pre">&quot;a11&quot;</span></code> &lt; <code class="docutils literal notranslate"><span class="pre">&quot;a100&quot;</span></code>.</p>
</div></div><div class="proof proof-type-exercise" id="id29">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.16</span>
        
    </div><div class="proof-content">
<p>(*)
In <strong class="command">sprintf</strong>,
the formatter <code class="docutils literal notranslate"><span class="pre">&quot;%20s&quot;</span></code> means that if a string is less than 20 bytes
long, the remaining bytes will be replaced with spaces.
Only for ASCII characters (English letters, digits, some punctuation marks,
etc.), it is true that one character is represented by 1 byte.
Other Unicode code points can take up between 2 and 4 bytes.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">cat</span><span class="p">(</span><span class="nf">sprintf</span><span class="p">(</span><span class="s">&quot;..%6s..&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;1!&lt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;a√üc&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ƒÖ√ü¬©&quot;</span><span class="p">)),</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;\n&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1"># aligned?</span>
<span class="c1">## ..   abc..</span>
<span class="c1">## ..   1!&lt;..</span>
<span class="c1">## ..  a√üc..</span>
<span class="c1">## ..ƒÖ√ü¬©..</span>
</pre></div>
</div>
<p>Use the <strong class="command">stri_pad</strong> function from the <strong class="program">stringi</strong>
package to align the strings aesthetically.
Alternatively, check out <strong class="command">sprintf</strong> from <strong class="program">stringx</strong>.</p>
</div></div><div class="proof proof-type-exercise" id="id30">

    <div class="proof-title">
        <span class="proof-type">Exercise 6.17</span>
        
    </div><div class="proof-content">
<p>(*) Implement an operation similar to <strong class="command">stri_pad</strong>
from <strong class="program">stringi</strong> using the functions introduced in this chapter.</p>
</div></div><hr class="footnotes docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="footstringcache" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">1</a><span class="fn-bracket">]</span></span>
<p>Internally, there is a string cache (a hash table).
Multiple clones of the same string do not occupy more
RAM than necessary.</p>
</aside>
<aside class="footnote brackets" id="footcharsxp" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">2</a><span class="fn-bracket">]</span></span>
<p>(*) <a class="reference internal" href="310-compiled.html#chap-compiled"><span class="std std-numref">Chapter 14</span></a> will mention
that objects of the type <code class="docutils literal notranslate"><span class="pre">character</span></code> are internally represented
as objects with <code class="docutils literal notranslate"><span class="pre">SEXPTYPE</span></code> of <code class="docutils literal notranslate"><span class="pre">STRSXP</span></code>. They
are arrays with elements whose <code class="docutils literal notranslate"><span class="pre">SEXPTYPE</span></code> is <code class="docutils literal notranslate"><span class="pre">CHARSXP</span></code>,
each of which is a string of characters (<code class="docutils literal notranslate"><span class="pre">char*</span></code>).</p>
</aside>
<aside class="footnote brackets" id="footsprintfwidth" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">3</a><span class="fn-bracket">]</span></span>
<p>This is only true for 8-bit native encodings;
see also <strong class="command">sprintf</strong> from the <strong class="program">stringx</strong> package,
which takes the text width and not the number of bytes into account.</p>
</aside>
<aside class="footnote brackets" id="footxtfrm" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id9">4</a><span class="fn-bracket">]</span></span>
<p>See <a class="reference internal" href="240-data-frame.html#sec-df-order"><span class="std std-numref">Section¬†12.3.1</span></a> for a use case.</p>
</aside>
<aside class="footnote brackets" id="footaltrepint" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id11">5</a><span class="fn-bracket">]</span></span>
<p>Actually, <code class="docutils literal notranslate"><span class="pre">1:10</span></code> returns an integer vector in a compact
(ALTREP; see <span id="id13">[<a class="reference internal" href="999-bibliography.html#id69" title="Tierney, L., Becker, G., and Kalibera, T. (2018).  ALTREP: Alternative Representations for R Objects. URL: https://svn.r-project.org/R/branches/ALTREP/ALTREP.html.">54</a>]</span>)
form; compare the results of the call to ‚Äú<strong class="command">.Internal</strong><code class="code docutils literal notranslate"><span class="pre">(</span></code><strong class="command">inspect</strong><code class="code docutils literal notranslate"><span class="pre">(1:10))</span></code>‚Äù
and ‚Äú<strong class="command">.Internal</strong><code class="code docutils literal notranslate"><span class="pre">(</span></code><strong class="command">inspect</strong><code class="code docutils literal notranslate"><span class="pre">(</span></code><strong class="command">seq</strong><code class="code docutils literal notranslate"><span class="pre">(1,</span> <span class="pre">10,</span> <span class="pre">1)))</span></code>‚Äù. This way, the whole vector
does not have to be allocated. This saves memory and time.
At the R level, though, it behaves as any other integer (numeric)
sequence.</p>
</aside>
</aside>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="170-function.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><span class="section-number">7. </span>Functions</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="150-indexing.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><span class="section-number">5. </span>Vector indexing</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
              
              
              Copyright &#169; 2022‚Äì2023 by <a href="https://www.gagolewski.com">Marek Gagolewski</a>.
              Some rights reserved. Licensed under <a href='https://creativecommons.org/licenses/by-nc-nd/4.0/'>CC BY-NC-ND 4.0</a>.
              Built with <a href="https://sphinx-doc.org/">Sphinx</a>
              and a customised <a href="https://github.com/pradyunsg/furo">Furo</a> theme.
              Last updated on 2023-06-05T14:13:28+1000.
              This site will never display any ads: it is a non-profit project.
              It does not collect any data.
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            In this chapter
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">6. Character vectors</a><ul>
<li><a class="reference internal" href="#creating-character-vectors">6.1. Creating character vectors</a><ul>
<li><a class="reference internal" href="#inputting-individual-strings">6.1.1. Inputting individual strings</a></li>
<li><a class="reference internal" href="#many-strings-one-object">6.1.2. Many strings, one object</a></li>
<li><a class="reference internal" href="#concatenating-character-vectors">6.1.3. Concatenating character vectors</a></li>
<li><a class="reference internal" href="#formatting-objects">6.1.4. Formatting objects</a></li>
<li><a class="reference internal" href="#reading-text-data-from-files">6.1.5. Reading text data from files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pattern-searching">6.2. Pattern searching</a><ul>
<li><a class="reference internal" href="#comparing-whole-strings">6.2.1. Comparing whole strings</a></li>
<li><a class="reference internal" href="#partial-matching">6.2.2. Partial matching</a></li>
<li><a class="reference internal" href="#matching-anywhere-within-a-string">6.2.3. Matching anywhere within a string</a></li>
<li><a class="reference internal" href="#using-regular-expressions">6.2.4. Using regular expressions (*)</a></li>
<li><a class="reference internal" href="#locating-pattern-occurrences">6.2.5. Locating pattern occurrences</a></li>
<li><a class="reference internal" href="#replacing-pattern-occurrences">6.2.6. Replacing pattern occurrences</a></li>
<li><a class="reference internal" href="#splitting-strings-into-tokens">6.2.7. Splitting strings into tokens</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-string-operations">6.3. Other string operations</a><ul>
<li><a class="reference internal" href="#extracting-substrings">6.3.1. Extracting substrings</a></li>
<li><a class="reference internal" href="#translating-characters">6.3.2. Translating characters</a></li>
<li><a class="reference internal" href="#ordering-strings">6.3.3. Ordering strings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-atomic-vector-types">6.4. Other atomic vector types (*)</a><ul>
<li><a class="reference internal" href="#integer-vectors">6.4.1. Integer vectors (*)</a></li>
<li><a class="reference internal" href="#raw-vectors">6.4.2. Raw vectors (*)</a></li>
<li><a class="reference internal" href="#complex-vectors">6.4.3. Complex vectors (*)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#exercises">6.5. Exercises</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/proof.js"></script>
    <script src="../_static/katex.min.js"></script>
    <script src="../_static/auto-render.min.js"></script>
    <script src="../_static/katex_autorenderer.js"></script>
    </body>
</html>